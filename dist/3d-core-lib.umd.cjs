(function(_,g){typeof exports=="object"&&typeof module<"u"?g(exports,require("three"),require("lil-gui"),require("gsap")):typeof define=="function"&&define.amd?define(["exports","three","lil-gui","gsap"],g):(_=typeof globalThis<"u"?globalThis:_||self,g(_["3d-core-lib"]={},_.THREE,_.GUI,_.gsap))})(this,function(_,g,FA,qA){"use strict";var As=Object.defineProperty;var es=(_,g,FA)=>g in _?As(_,g,{enumerable:!0,configurable:!0,writable:!0,value:FA}):_[g]=FA;var z=(_,g,FA)=>es(_,typeof g!="symbol"?g+"":g,FA);var Qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ue={};/*! *****************************************************************************
	Copyright (C) Microsoft. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var le;function gt(){if(le)return ue;le=1;var r;return function(A){(function(e){var n=typeof globalThis=="object"?globalThis:typeof Qe=="object"?Qe:typeof self=="object"?self:typeof this=="object"?this:a(),t=s(A);typeof n.Reflect<"u"&&(t=s(n.Reflect,t)),e(t,n),typeof n.Reflect>"u"&&(n.Reflect=A);function s(I,c){return function(B,E){Object.defineProperty(I,B,{configurable:!0,writable:!0,value:E}),c&&c(B,E)}}function i(){try{return Function("return this;")()}catch{}}function o(){try{return(0,eval)("(function() { return this; })()")}catch{}}function a(){return i()||o()}})(function(e,n){var t=Object.prototype.hasOwnProperty,s=typeof Symbol=="function",i=s&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=s&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",a=typeof Object.create=="function",I={__proto__:[]}instanceof Array,c=!a&&!I,B={create:a?function(){return Ee(Object.create(null))}:I?function(){return Ee({__proto__:null})}:function(){return Ee({})},has:c?function(C,Q){return t.call(C,Q)}:function(C,Q){return Q in C},get:c?function(C,Q){return t.call(C,Q)?C[Q]:void 0}:function(C,Q){return C[Q]}},E=Object.getPrototypeOf(Function),u=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:jn(),f=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Wn(),h=typeof WeakMap=="function"?WeakMap:zn(),d=s?Symbol.for("@reflect-metadata:registry"):void 0,w=Yn(),R=Vn(w);function F(C,Q,l,p){if(T(l)){if(!bA(C))throw new TypeError;if(!tt(Q))throw new TypeError;return IA(C,Q)}else{if(!bA(C))throw new TypeError;if(!q(Q))throw new TypeError;if(!q(p)&&!T(p)&&!dA(p))throw new TypeError;return dA(p)&&(p=void 0),l=iA(l),wA(C,Q,l,p)}}e("decorate",F);function L(C,Q){function l(p,G){if(!q(p))throw new TypeError;if(!T(G)&&!Jn(G))throw new TypeError;X(C,Q,p,G)}return l}e("metadata",L);function N(C,Q,l,p){if(!q(l))throw new TypeError;return T(p)||(p=iA(p)),X(C,Q,l,p)}e("defineMetadata",N);function b(C,Q,l){if(!q(Q))throw new TypeError;return T(l)||(l=iA(l)),tA(C,Q,l)}e("hasMetadata",b);function J(C,Q,l){if(!q(Q))throw new TypeError;return T(l)||(l=iA(l)),eA(C,Q,l)}e("hasOwnMetadata",J);function $(C,Q,l){if(!q(Q))throw new TypeError;return T(l)||(l=iA(l)),v(C,Q,l)}e("getMetadata",$);function P(C,Q,l){if(!q(Q))throw new TypeError;return T(l)||(l=iA(l)),V(C,Q,l)}e("getOwnMetadata",P);function AA(C,Q){if(!q(C))throw new TypeError;return T(Q)||(Q=iA(Q)),nA(C,Q)}e("getMetadataKeys",AA);function Y(C,Q){if(!q(C))throw new TypeError;return T(Q)||(Q=iA(Q)),BA(C,Q)}e("getOwnMetadataKeys",Y);function lA(C,Q,l){if(!q(Q))throw new TypeError;if(T(l)||(l=iA(l)),!q(Q))throw new TypeError;T(l)||(l=iA(l));var p=vA(Q,l,!1);return T(p)?!1:p.OrdinaryDeleteMetadata(C,Q,l)}e("deleteMetadata",lA);function IA(C,Q){for(var l=C.length-1;l>=0;--l){var p=C[l],G=p(Q);if(!T(G)&&!dA(G)){if(!tt(G))throw new TypeError;Q=G}}return Q}function wA(C,Q,l,p){for(var G=C.length-1;G>=0;--G){var W=C[G],j=W(Q,l,p);if(!T(j)&&!dA(j)){if(!q(j))throw new TypeError;p=j}}return p}function tA(C,Q,l){var p=eA(C,Q,l);if(p)return!0;var G=Ce(Q);return dA(G)?!1:tA(C,G,l)}function eA(C,Q,l){var p=vA(Q,l,!1);return T(p)?!1:NA(p.OrdinaryHasOwnMetadata(C,Q,l))}function v(C,Q,l){var p=eA(C,Q,l);if(p)return V(C,Q,l);var G=Ce(Q);if(!dA(G))return v(C,G,l)}function V(C,Q,l){var p=vA(Q,l,!1);if(!T(p))return p.OrdinaryGetOwnMetadata(C,Q,l)}function X(C,Q,l,p){var G=vA(l,p,!0);G.OrdinaryDefineOwnMetadata(C,Q,l,p)}function nA(C,Q){var l=BA(C,Q),p=Ce(C);if(p===null)return l;var G=nA(p,Q);if(G.length<=0)return l;if(l.length<=0)return G;for(var W=new f,j=[],k=0,y=l;k<y.length;k++){var m=y[k],D=W.has(m);D||(W.add(m),j.push(m))}for(var S=0,U=G;S<U.length;S++){var m=U[S],D=W.has(m);D||(W.add(m),j.push(m))}return j}function BA(C,Q){var l=vA(C,Q,!1);return l?l.OrdinaryOwnMetadataKeys(C,Q):[]}function fA(C){if(C===null)return 1;switch(typeof C){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return C===null?1:6;default:return 6}}function T(C){return C===void 0}function dA(C){return C===null}function RA(C){return typeof C=="symbol"}function q(C){return typeof C=="object"?C!==null:typeof C=="function"}function xA(C,Q){switch(fA(C)){case 0:return C;case 1:return C;case 2:return C;case 3:return C;case 4:return C;case 5:return C}var l="string",p=nt(C,i);if(p!==void 0){var G=p.call(C,l);if(q(G))throw new TypeError;return G}return OA(C)}function OA(C,Q){var l,p;{var G=C.toString;if(SA(G)){var p=G.call(C);if(!q(p))return p}var l=C.valueOf;if(SA(l)){var p=l.call(C);if(!q(p))return p}}throw new TypeError}function NA(C){return!!C}function Be(C){return""+C}function iA(C){var Q=xA(C);return RA(Q)?Q:Be(Q)}function bA(C){return Array.isArray?Array.isArray(C):C instanceof Object?C instanceof Array:Object.prototype.toString.call(C)==="[object Array]"}function SA(C){return typeof C=="function"}function tt(C){return typeof C=="function"}function Jn(C){switch(fA(C)){case 3:return!0;case 4:return!0;default:return!1}}function ce(C,Q){return C===Q||C!==C&&Q!==Q}function nt(C,Q){var l=C[Q];if(l!=null){if(!SA(l))throw new TypeError;return l}}function st(C){var Q=nt(C,o);if(!SA(Q))throw new TypeError;var l=Q.call(C);if(!q(l))throw new TypeError;return l}function it(C){return C.value}function rt(C){var Q=C.next();return Q.done?!1:Q}function ot(C){var Q=C.return;Q&&Q.call(C)}function Ce(C){var Q=Object.getPrototypeOf(C);if(typeof C!="function"||C===E||Q!==E)return Q;var l=C.prototype,p=l&&Object.getPrototypeOf(l);if(p==null||p===Object.prototype)return Q;var G=p.constructor;return typeof G!="function"||G===C?Q:G}function Kn(){var C;!T(d)&&typeof n.Reflect<"u"&&!(d in n.Reflect)&&typeof n.Reflect.defineMetadata=="function"&&(C=Xn(n.Reflect));var Q,l,p,G=new h,W={registerProvider:j,getProvider:y,setProvider:D};return W;function j(S){if(!Object.isExtensible(W))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case C===S:break;case T(Q):Q=S;break;case Q===S:break;case T(l):l=S;break;case l===S:break;default:p===void 0&&(p=new f),p.add(S);break}}function k(S,U){if(!T(Q)){if(Q.isProviderFor(S,U))return Q;if(!T(l)){if(l.isProviderFor(S,U))return Q;if(!T(p))for(var O=st(p);;){var K=rt(O);if(!K)return;var cA=it(K);if(cA.isProviderFor(S,U))return ot(O),cA}}}if(!T(C)&&C.isProviderFor(S,U))return C}function y(S,U){var O=G.get(S),K;return T(O)||(K=O.get(U)),T(K)&&(K=k(S,U),T(K)||(T(O)&&(O=new u,G.set(S,O)),O.set(U,K))),K}function m(S){if(T(S))throw new TypeError;return Q===S||l===S||!T(p)&&p.has(S)}function D(S,U,O){if(!m(O))throw new Error("Metadata provider not registered.");var K=y(S,U);if(K!==O){if(!T(K))return!1;var cA=G.get(S);T(cA)&&(cA=new u,G.set(S,cA)),cA.set(U,O)}return!0}}function Yn(){var C;return!T(d)&&q(n.Reflect)&&Object.isExtensible(n.Reflect)&&(C=n.Reflect[d]),T(C)&&(C=Kn()),!T(d)&&q(n.Reflect)&&Object.isExtensible(n.Reflect)&&Object.defineProperty(n.Reflect,d,{enumerable:!1,configurable:!1,writable:!1,value:C}),C}function Vn(C){var Q=new h,l={isProviderFor:function(m,D){var S=Q.get(m);return T(S)?!1:S.has(D)},OrdinaryDefineOwnMetadata:j,OrdinaryHasOwnMetadata:G,OrdinaryGetOwnMetadata:W,OrdinaryOwnMetadataKeys:k,OrdinaryDeleteMetadata:y};return w.registerProvider(l),l;function p(m,D,S){var U=Q.get(m),O=!1;if(T(U)){if(!S)return;U=new u,Q.set(m,U),O=!0}var K=U.get(D);if(T(K)){if(!S)return;if(K=new u,U.set(D,K),!C.setProvider(m,D,l))throw U.delete(D),O&&Q.delete(m),new Error("Wrong provider for target.")}return K}function G(m,D,S){var U=p(D,S,!1);return T(U)?!1:NA(U.has(m))}function W(m,D,S){var U=p(D,S,!1);if(!T(U))return U.get(m)}function j(m,D,S,U){var O=p(S,U,!0);O.set(m,D)}function k(m,D){var S=[],U=p(m,D,!1);if(T(U))return S;for(var O=U.keys(),K=st(O),cA=0;;){var at=rt(K);if(!at)return S.length=cA,S;var Zn=it(at);try{S[cA]=Zn}catch($n){try{ot(K)}finally{throw $n}}cA++}}function y(m,D,S){var U=p(D,S,!1);if(T(U)||!U.delete(m))return!1;if(U.size===0){var O=Q.get(D);T(O)||(O.delete(S),O.size===0&&Q.delete(O))}return!0}}function Xn(C){var Q=C.defineMetadata,l=C.hasOwnMetadata,p=C.getOwnMetadata,G=C.getOwnMetadataKeys,W=C.deleteMetadata,j=new h,k={isProviderFor:function(y,m){var D=j.get(y);return!T(D)&&D.has(m)?!0:G(y,m).length?(T(D)&&(D=new f,j.set(y,D)),D.add(m),!0):!1},OrdinaryDefineOwnMetadata:Q,OrdinaryHasOwnMetadata:l,OrdinaryGetOwnMetadata:p,OrdinaryOwnMetadataKeys:G,OrdinaryDeleteMetadata:W};return k}function vA(C,Q,l){var p=w.getProvider(C,Q);if(!T(p))return p;if(l){if(w.setProvider(C,Q,R))return R;throw new Error("Illegal state.")}}function jn(){var C={},Q=[],l=function(){function k(y,m,D){this._index=0,this._keys=y,this._values=m,this._selector=D}return k.prototype["@@iterator"]=function(){return this},k.prototype[o]=function(){return this},k.prototype.next=function(){var y=this._index;if(y>=0&&y<this._keys.length){var m=this._selector(this._keys[y],this._values[y]);return y+1>=this._keys.length?(this._index=-1,this._keys=Q,this._values=Q):this._index++,{value:m,done:!1}}return{value:void 0,done:!0}},k.prototype.throw=function(y){throw this._index>=0&&(this._index=-1,this._keys=Q,this._values=Q),y},k.prototype.return=function(y){return this._index>=0&&(this._index=-1,this._keys=Q,this._values=Q),{value:y,done:!0}},k}(),p=function(){function k(){this._keys=[],this._values=[],this._cacheKey=C,this._cacheIndex=-2}return Object.defineProperty(k.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),k.prototype.has=function(y){return this._find(y,!1)>=0},k.prototype.get=function(y){var m=this._find(y,!1);return m>=0?this._values[m]:void 0},k.prototype.set=function(y,m){var D=this._find(y,!0);return this._values[D]=m,this},k.prototype.delete=function(y){var m=this._find(y,!1);if(m>=0){for(var D=this._keys.length,S=m+1;S<D;S++)this._keys[S-1]=this._keys[S],this._values[S-1]=this._values[S];return this._keys.length--,this._values.length--,ce(y,this._cacheKey)&&(this._cacheKey=C,this._cacheIndex=-2),!0}return!1},k.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=C,this._cacheIndex=-2},k.prototype.keys=function(){return new l(this._keys,this._values,G)},k.prototype.values=function(){return new l(this._keys,this._values,W)},k.prototype.entries=function(){return new l(this._keys,this._values,j)},k.prototype["@@iterator"]=function(){return this.entries()},k.prototype[o]=function(){return this.entries()},k.prototype._find=function(y,m){if(!ce(this._cacheKey,y)){this._cacheIndex=-1;for(var D=0;D<this._keys.length;D++)if(ce(this._keys[D],y)){this._cacheIndex=D;break}}return this._cacheIndex<0&&m&&(this._cacheIndex=this._keys.length,this._keys.push(y),this._values.push(void 0)),this._cacheIndex},k}();return p;function G(k,y){return k}function W(k,y){return y}function j(k,y){return[k,y]}}function Wn(){var C=function(){function Q(){this._map=new u}return Object.defineProperty(Q.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Q.prototype.has=function(l){return this._map.has(l)},Q.prototype.add=function(l){return this._map.set(l,l),this},Q.prototype.delete=function(l){return this._map.delete(l)},Q.prototype.clear=function(){this._map.clear()},Q.prototype.keys=function(){return this._map.keys()},Q.prototype.values=function(){return this._map.keys()},Q.prototype.entries=function(){return this._map.entries()},Q.prototype["@@iterator"]=function(){return this.keys()},Q.prototype[o]=function(){return this.keys()},Q}();return C}function zn(){var C=16,Q=B.create(),l=p();return function(){function y(){this._key=p()}return y.prototype.has=function(m){var D=G(m,!1);return D!==void 0?B.has(D,this._key):!1},y.prototype.get=function(m){var D=G(m,!1);return D!==void 0?B.get(D,this._key):void 0},y.prototype.set=function(m,D){var S=G(m,!0);return S[this._key]=D,this},y.prototype.delete=function(m){var D=G(m,!1);return D!==void 0?delete D[this._key]:!1},y.prototype.clear=function(){this._key=p()},y}();function p(){var y;do y="@@WeakMap@@"+k();while(B.has(Q,y));return Q[y]=!0,y}function G(y,m){if(!t.call(y,l)){if(!m)return;Object.defineProperty(y,l,{value:B.create()})}return y[l]}function W(y,m){for(var D=0;D<m;++D)y[D]=Math.random()*255|0;return y}function j(y){if(typeof Uint8Array=="function"){var m=new Uint8Array(y);return typeof crypto<"u"?crypto.getRandomValues(m):typeof msCrypto<"u"?msCrypto.getRandomValues(m):W(m,y),m}return W(new Array(y),y)}function k(){var y=j(C);y[6]=y[6]&79|64,y[8]=y[8]&191|128;for(var m="",D=0;D<C;++D){var S=y[D];(D===4||D===6||D===8)&&(m+="-"),S<16&&(m+="0"),m+=S.toString(16).toLowerCase()}return m}}function Ee(C){return C.__=void 0,delete C.__,C}})}(r||(r={})),ue}gt();const fe="inversify:paramtypes",It="design:paramtypes";let Bt=0;function ct(){return Bt++}var de;(function(r){r[r.MultipleBindingsAvailable=2]="MultipleBindingsAvailable",r[r.NoBindingsAvailable=0]="NoBindingsAvailable",r[r.OnlyOneBindingAvailable=1]="OnlyOneBindingAvailable"})(de||(de={}));var he;(function(r){r.DynamicValue="toDynamicValue",r.Factory="toFactory",r.Provider="toProvider"})(he||(he={}));class Ct{constructor(A){z(this,"id");z(this,"registry");this.id=ct(),this.registry=A}}function Et(){return function(r){if(Reflect.hasOwnMetadata(fe,r))throw new Error("Cannot apply @injectable decorator multiple times.");const A=Reflect.getMetadata(It,r)||[];return Reflect.defineMetadata(fe,A,r),r}}const yA={BaseOpt:Symbol.for("BaseOpt"),CommonDebugOpt:Symbol.for("CommonDebugOpt"),ThreeJsBase:Symbol.for("ThreeJsBase"),ResourceLoader:Symbol.for("ResourceLoader"),UpdateHandler:Symbol.for("UpdateHandler"),Update:Symbol.for("Update"),Init:Symbol.for("Init"),Reset:Symbol.for("Reset"),GUI:Symbol.for("GUI"),PassedTime:Symbol.for("PassedTime")};class Qt{constructor(A=4){this.pool=A,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(A){if(!this.workers[A]){const e=this.workerCreator();e.addEventListener("message",this._onMessage.bind(this,A)),this.workers[A]=e}}_getIdleWorker(){for(let A=0;A<this.pool;A++)if(!(this.workerStatus&1<<A))return A;return-1}_onMessage(A,e){const n=this.workersResolve[A];if(n&&n(e),this.queue.length){const{resolve:t,msg:s,transfer:i}=this.queue.shift();this.workersResolve[A]=t,this.workers[A].postMessage(s,i)}else this.workerStatus^=1<<A}setWorkerCreator(A){this.workerCreator=A}setWorkerLimit(A){this.pool=A}postMessage(A,e){return new Promise(n=>{const t=this._getIdleWorker();t!==-1?(this._initWorker(t),this.workerStatus|=1<<t,this.workersResolve[t]=n,this.workers[t].postMessage(A,e)):this.queue.push({resolve:n,msg:A,transfer:e})})}dispose(){this.workers.forEach(A=>A.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const ut=0,pe=2,lt=1,we=2,ft=0,dt=1,ht=10,pt=0,ye=9,me=15,De=16,Re=22,Se=37,Fe=43,Te=76,Ge=83,Le=97,Me=100,ke=103,_e=109,Ue=165,xe=166,Ne=1000066e3;class wt{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class MA{constructor(A,e,n,t){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(A.buffer,A.byteOffset+e,n),this._littleEndian=t,this._offset=0}_nextUint8(){const A=this._dataView.getUint8(this._offset);return this._offset+=1,A}_nextUint16(){const A=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,A}_nextUint32(){const A=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,A}_nextUint64(){const A=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,A}_nextInt32(){const A=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,A}_nextUint8Array(A){const e=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,A);return this._offset+=A,e}_skip(A){return this._offset+=A,this}_scan(A,e){e===void 0&&(e=0);const n=this._offset;let t=0;for(;this._dataView.getUint8(this._offset)!==e&&t<A;)t++,this._offset++;return t<A&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,t)}}const Z=[171,75,84,88,32,50,48,187,13,10,26,10];function be(r){return new TextDecoder().decode(r)}function yt(r){const A=new Uint8Array(r.buffer,r.byteOffset,Z.length);if(A[0]!==Z[0]||A[1]!==Z[1]||A[2]!==Z[2]||A[3]!==Z[3]||A[4]!==Z[4]||A[5]!==Z[5]||A[6]!==Z[6]||A[7]!==Z[7]||A[8]!==Z[8]||A[9]!==Z[9]||A[10]!==Z[10]||A[11]!==Z[11])throw new Error("Missing KTX 2.0 identifier.");const e=new wt,n=17*Uint32Array.BYTES_PER_ELEMENT,t=new MA(r,Z.length,n,!0);e.vkFormat=t._nextUint32(),e.typeSize=t._nextUint32(),e.pixelWidth=t._nextUint32(),e.pixelHeight=t._nextUint32(),e.pixelDepth=t._nextUint32(),e.layerCount=t._nextUint32(),e.faceCount=t._nextUint32();const s=t._nextUint32();e.supercompressionScheme=t._nextUint32();const i=t._nextUint32(),o=t._nextUint32(),a=t._nextUint32(),I=t._nextUint32(),c=t._nextUint64(),B=t._nextUint64(),E=new MA(r,Z.length+n,3*s*8,!0);for(let v=0;v<s;v++)e.levels.push({levelData:new Uint8Array(r.buffer,r.byteOffset+E._nextUint64(),E._nextUint64()),uncompressedByteLength:E._nextUint64()});const u=new MA(r,i,o,!0),f={vendorId:u._skip(4)._nextUint16(),descriptorType:u._nextUint16(),versionNumber:u._nextUint16(),descriptorBlockSize:u._nextUint16(),colorModel:u._nextUint8(),colorPrimaries:u._nextUint8(),transferFunction:u._nextUint8(),flags:u._nextUint8(),texelBlockDimension:[u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8()],bytesPlane:[u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8()],samples:[]},h=(f.descriptorBlockSize/4-6)/4;for(let v=0;v<h;v++){const V={bitOffset:u._nextUint16(),bitLength:u._nextUint8(),channelType:u._nextUint8(),samplePosition:[u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&V.channelType?(V.sampleLower=u._nextInt32(),V.sampleUpper=u._nextInt32()):(V.sampleLower=u._nextUint32(),V.sampleUpper=u._nextUint32()),f.samples[v]=V}e.dataFormatDescriptor.length=0,e.dataFormatDescriptor.push(f);const d=new MA(r,a,I,!0);for(;d._offset<I;){const v=d._nextUint32(),V=d._scan(v),X=be(V);if(e.keyValue[X]=d._nextUint8Array(v-V.byteLength-1),X.match(/^ktx/i)){const nA=be(e.keyValue[X]);e.keyValue[X]=nA.substring(0,nA.lastIndexOf("\0"))}d._skip(v%4?4-v%4:0)}if(B<=0)return e;const w=new MA(r,c,B,!0),R=w._nextUint16(),F=w._nextUint16(),L=w._nextUint32(),N=w._nextUint32(),b=w._nextUint32(),J=w._nextUint32(),$=[];for(let v=0;v<s;v++)$.push({imageFlags:w._nextUint32(),rgbSliceByteOffset:w._nextUint32(),rgbSliceByteLength:w._nextUint32(),alphaSliceByteOffset:w._nextUint32(),alphaSliceByteLength:w._nextUint32()});const P=c+w._offset,AA=P+L,Y=AA+N,lA=Y+b,IA=new Uint8Array(r.buffer,r.byteOffset+P,L),wA=new Uint8Array(r.buffer,r.byteOffset+AA,N),tA=new Uint8Array(r.buffer,r.byteOffset+Y,b),eA=new Uint8Array(r.buffer,r.byteOffset+lA,J);return e.globalData={endpointCount:R,selectorCount:F,imageDescs:$,endpointsData:IA,selectorsData:wA,tablesData:tA,extendedData:eA},e}let PA,QA,JA;const KA={env:{emscripten_notify_memory_growth:function(r){JA=new Uint8Array(QA.exports.memory.buffer)}}};class mt{init(){return PA||(PA=typeof fetch<"u"?fetch("data:application/wasm;base64,"+ve).then(A=>A.arrayBuffer()).then(A=>WebAssembly.instantiate(A,KA)).then(this._init):WebAssembly.instantiate(Buffer.from(ve,"base64"),KA).then(this._init),PA)}_init(A){QA=A.instance,KA.env.emscripten_notify_memory_growth(0)}decode(A,e=0){if(!QA)throw new Error("ZSTDDecoder: Await .init() before decoding.");const n=A.byteLength,t=QA.exports.malloc(n);JA.set(A,t),e=e||Number(QA.exports.ZSTD_findDecompressedSize(t,n));const s=QA.exports.malloc(e),i=QA.exports.ZSTD_decompress(s,e,t,n),o=JA.slice(s,s+i);return QA.exports.free(t),QA.exports.free(s),o}}const ve="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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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",YA=new WeakMap;let VA=0,XA;class CA extends g.Loader{constructor(A){super(A),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new Qt,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(A){return this.transcoderPath=A,this}setWorkerLimit(A){return this.workerPool.setWorkerLimit(A),this}async detectSupportAsync(A){return this.workerConfig={astcSupported:await A.hasFeatureAsync("texture-compression-astc"),etc1Supported:await A.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await A.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await A.hasFeatureAsync("texture-compression-bc"),bptcSupported:await A.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await A.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(A){return A.isWebGPURenderer===!0?this.workerConfig={astcSupported:A.hasFeature("texture-compression-astc"),etc1Supported:A.hasFeature("texture-compression-etc1"),etc2Supported:A.hasFeature("texture-compression-etc2"),dxtSupported:A.hasFeature("texture-compression-bc"),bptcSupported:A.hasFeature("texture-compression-bptc"),pvrtcSupported:A.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:A.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:A.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:A.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:A.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:A.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:A.extensions.has("WEBGL_compressed_texture_pvrtc")||A.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const A=new g.FileLoader(this.manager);A.setPath(this.transcoderPath),A.setWithCredentials(this.withCredentials);const e=A.loadAsync("basis_transcoder.js"),n=new g.FileLoader(this.manager);n.setPath(this.transcoderPath),n.setResponseType("arraybuffer"),n.setWithCredentials(this.withCredentials);const t=n.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([e,t]).then(([s,i])=>{const o=CA.BasisWorker.toString(),a=["/* constants */","let _EngineFormat = "+JSON.stringify(CA.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(CA.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(CA.BasisFormat),"/* basis_transcoder.js */",s,"/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a])),this.transcoderBinary=i,this.workerPool.setWorkerCreator(()=>{const I=new Worker(this.workerSourceURL),c=this.transcoderBinary.slice(0);return I.postMessage({type:"init",config:this.workerConfig,transcoderBinary:c},[c]),I})}),VA>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),VA++}return this.transcoderPending}load(A,e,n,t){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const s=new g.FileLoader(this.manager);s.setResponseType("arraybuffer"),s.setWithCredentials(this.withCredentials),s.load(A,i=>{this.parse(i,e,t)},n,t)}parse(A,e,n){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");if(YA.has(A))return YA.get(A).promise.then(e).catch(n);this._createTexture(A).then(t=>e?e(t):null).catch(n)}_createTextureFrom(A,e){const{faces:n,width:t,height:s,format:i,type:o,error:a,dfdFlags:I}=A;if(o==="error")return Promise.reject(a);let c;if(e.faceCount===6)c=new g.CompressedCubeTexture(n,i,g.UnsignedByteType);else{const B=n[0].mipmaps;c=e.layerCount>1?new g.CompressedArrayTexture(B,t,s,e.layerCount,i,g.UnsignedByteType):new g.CompressedTexture(B,t,s,i,g.UnsignedByteType)}return c.minFilter=n[0].mipmaps.length===1?g.LinearFilter:g.LinearMipmapLinearFilter,c.magFilter=g.LinearFilter,c.generateMipmaps=!1,c.needsUpdate=!0,c.colorSpace=He(e),c.premultiplyAlpha=!!(I&lt),c}async _createTexture(A,e={}){const n=yt(new Uint8Array(A));if(n.vkFormat!==pt)return Rt(n);const t=e,s=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:A,taskConfig:t},[A])).then(i=>this._createTextureFrom(i.data,n));return YA.set(A,{promise:s}),s}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),VA--,this}}CA.BasisFormat={ETC1S:0,UASTC_4x4:1},CA.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},CA.EngineFormat={RGBAFormat:g.RGBAFormat,RGBA_ASTC_4x4_Format:g.RGBA_ASTC_4x4_Format,RGBA_BPTC_Format:g.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:g.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:g.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:g.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:g.RGB_ETC1_Format,RGB_ETC2_Format:g.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:g.RGB_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format:g.RGBA_S3TC_DXT1_Format},CA.BasisWorker=function(){let r,A,e;const n=_EngineFormat,t=_TranscoderFormat,s=_BasisFormat;self.addEventListener("message",function(f){const h=f.data;switch(h.type){case"init":r=h.config,i(h.transcoderBinary);break;case"transcode":A.then(()=>{try{const{faces:d,buffers:w,width:R,height:F,hasAlpha:L,format:N,dfdFlags:b}=o(h.buffer);self.postMessage({type:"transcode",id:h.id,faces:d,width:R,height:F,hasAlpha:L,format:N,dfdFlags:b},w)}catch(d){console.error(d),self.postMessage({type:"error",id:h.id,error:d.message})}});break}});function i(f){A=new Promise(h=>{e={wasmBinary:f,onRuntimeInitialized:h},BASIS(e)}).then(()=>{e.initializeBasis(),e.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function o(f){const h=new e.KTX2File(new Uint8Array(f));function d(){h.close(),h.delete()}if(!h.isValid())throw d(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const w=h.isUASTC()?s.UASTC_4x4:s.ETC1S,R=h.getWidth(),F=h.getHeight(),L=h.getLayers()||1,N=h.getLevels(),b=h.getFaces(),J=h.getHasAlpha(),$=h.getDFDFlags(),{transcoderFormat:P,engineFormat:AA}=B(w,R,F,J);if(!R||!F||!N)throw d(),new Error("THREE.KTX2Loader:	Invalid texture");if(!h.startTranscoding())throw d(),new Error("THREE.KTX2Loader: .startTranscoding failed");const Y=[],lA=[];for(let IA=0;IA<b;IA++){const wA=[];for(let tA=0;tA<N;tA++){const eA=[];let v,V;for(let nA=0;nA<L;nA++){const BA=h.getImageLevelInfo(tA,nA,IA);IA===0&&tA===0&&nA===0&&(BA.origWidth%4!==0||BA.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),N>1?(v=BA.origWidth,V=BA.origHeight):(v=BA.width,V=BA.height);const fA=new Uint8Array(h.getImageTranscodedSizeInBytes(tA,nA,0,P));if(!h.transcodeImage(fA,tA,nA,IA,P,0,-1,-1))throw d(),new Error("THREE.KTX2Loader: .transcodeImage failed.");eA.push(fA)}const X=u(eA);wA.push({data:X,width:v,height:V}),lA.push(X.buffer)}Y.push({mipmaps:wA,width:R,height:F,format:AA})}return d(),{faces:Y,buffers:lA,width:R,height:F,hasAlpha:J,format:AA,dfdFlags:$}}const a=[{if:"astcSupported",basisFormat:[s.UASTC_4x4],transcoderFormat:[t.ASTC_4x4,t.ASTC_4x4],engineFormat:[n.RGBA_ASTC_4x4_Format,n.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[t.BC7_M5,t.BC7_M5],engineFormat:[n.RGBA_BPTC_Format,n.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[t.BC1,t.BC3],engineFormat:[n.RGBA_S3TC_DXT1_Format,n.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[t.ETC1,t.ETC2],engineFormat:[n.RGB_ETC2_Format,n.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[t.ETC1],engineFormat:[n.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[t.PVRTC1_4_RGB,t.PVRTC1_4_RGBA],engineFormat:[n.RGB_PVRTC_4BPPV1_Format,n.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],I=a.sort(function(f,h){return f.priorityETC1S-h.priorityETC1S}),c=a.sort(function(f,h){return f.priorityUASTC-h.priorityUASTC});function B(f,h,d,w){let R,F;const L=f===s.ETC1S?I:c;for(let N=0;N<L.length;N++){const b=L[N];if(r[b.if]&&b.basisFormat.includes(f)&&!(w&&b.transcoderFormat.length<2)&&!(b.needsPowerOfTwo&&!(E(h)&&E(d))))return R=b.transcoderFormat[w?1:0],F=b.engineFormat[w?1:0],{transcoderFormat:R,engineFormat:F}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),R=t.RGBA32,F=n.RGBAFormat,{transcoderFormat:R,engineFormat:F}}function E(f){return f<=2?!0:(f&f-1)===0&&f!==0}function u(f){if(f.length===1)return f[0];let h=0;for(let R=0;R<f.length;R++){const F=f[R];h+=F.byteLength}const d=new Uint8Array(h);let w=0;for(let R=0;R<f.length;R++){const F=f[R];d.set(F,w),w+=F.byteLength}return d}};const Dt=new Set([g.RGBAFormat,g.RGFormat,g.RedFormat]),jA={[_e]:g.RGBAFormat,[Le]:g.RGBAFormat,[Se]:g.RGBAFormat,[Fe]:g.RGBAFormat,[ke]:g.RGFormat,[Ge]:g.RGFormat,[De]:g.RGFormat,[Re]:g.RGFormat,[Me]:g.RedFormat,[Te]:g.RedFormat,[me]:g.RedFormat,[ye]:g.RedFormat,[Ne]:g.RGBA_ASTC_4x4_Format,[xe]:g.RGBA_ASTC_6x6_Format,[Ue]:g.RGBA_ASTC_6x6_Format},WA={[_e]:g.FloatType,[Le]:g.HalfFloatType,[Se]:g.UnsignedByteType,[Fe]:g.UnsignedByteType,[ke]:g.FloatType,[Ge]:g.HalfFloatType,[De]:g.UnsignedByteType,[Re]:g.UnsignedByteType,[Me]:g.FloatType,[Te]:g.HalfFloatType,[me]:g.UnsignedByteType,[ye]:g.UnsignedByteType,[Ne]:g.HalfFloatType,[xe]:g.UnsignedByteType,[Ue]:g.UnsignedByteType};async function Rt(r){const{vkFormat:A}=r;if(jA[A]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let e;r.supercompressionScheme===pe&&(XA||(XA=new Promise(async s=>{const i=new mt;await i.init(),s(i)})),e=await XA);const n=[];for(let s=0;s<r.levels.length;s++){const i=Math.max(1,r.pixelWidth>>s),o=Math.max(1,r.pixelHeight>>s),a=r.pixelDepth?Math.max(1,r.pixelDepth>>s):0,I=r.levels[s];let c;if(r.supercompressionScheme===ut)c=I.levelData;else if(r.supercompressionScheme===pe)c=e.decode(I.levelData,I.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");let B;WA[A]===g.FloatType?B=new Float32Array(c.buffer,c.byteOffset,c.byteLength/Float32Array.BYTES_PER_ELEMENT):WA[A]===g.HalfFloatType?B=new Uint16Array(c.buffer,c.byteOffset,c.byteLength/Uint16Array.BYTES_PER_ELEMENT):B=c,n.push({data:B,width:i,height:o,depth:a})}let t;if(Dt.has(jA[A]))t=r.pixelDepth===0?new g.DataTexture(n[0].data,r.pixelWidth,r.pixelHeight):new g.Data3DTexture(n[0].data,r.pixelWidth,r.pixelHeight,r.pixelDepth);else{if(r.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");t=new g.CompressedTexture(n,r.pixelWidth,r.pixelHeight)}return t.mipmaps=n,t.type=WA[A],t.format=jA[A],t.colorSpace=He(r),t.needsUpdate=!0,Promise.resolve(t)}function He(r){const A=r.dataFormatDescriptor[0];return A.colorPrimaries===dt?A.transferFunction===we?g.SRGBColorSpace:g.LinearSRGBColorSpace:A.colorPrimaries===ht?A.transferFunction===we?g.DisplayP3ColorSpace:g.LinearDisplayP3ColorSpace:(A.colorPrimaries===ft||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${A.colorPrimaries}"`),g.NoColorSpace)}const zA=new WeakMap;class St extends g.Loader{constructor(A){super(A),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(A){return this.decoderPath=A,this}setDecoderConfig(A){return this.decoderConfig=A,this}setWorkerLimit(A){return this.workerLimit=A,this}load(A,e,n,t){const s=new g.FileLoader(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(A,i=>{this.parse(i,e,t)},n,t)}parse(A,e,n=()=>{}){this.decodeDracoFile(A,e,null,null,g.SRGBColorSpace,n).catch(n)}decodeDracoFile(A,e,n,t,s=g.LinearSRGBColorSpace,i=()=>{}){const o={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:t||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:s};return this.decodeGeometry(A,o).then(e).catch(i)}decodeGeometry(A,e){const n=JSON.stringify(e);if(zA.has(A)){const a=zA.get(A);if(a.key===n)return a.promise;if(A.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let t;const s=this.workerNextTaskID++,i=A.byteLength,o=this._getWorker(s,i).then(a=>(t=a,new Promise((I,c)=>{t._callbacks[s]={resolve:I,reject:c},t.postMessage({type:"decode",id:s,taskConfig:e,buffer:A},[A])}))).then(a=>this._createGeometry(a.geometry));return o.catch(()=>!0).then(()=>{t&&s&&this._releaseTask(t,s)}),zA.set(A,{key:n,promise:o}),o}_createGeometry(A){const e=new g.BufferGeometry;A.index&&e.setIndex(new g.BufferAttribute(A.index.array,1));for(let n=0;n<A.attributes.length;n++){const t=A.attributes[n],s=t.name,i=t.array,o=t.itemSize,a=new g.BufferAttribute(i,o);s==="color"&&(this._assignVertexColorSpace(a,t.vertexColorSpace),a.normalized=!(i instanceof Float32Array)),e.setAttribute(s,a)}return e}_assignVertexColorSpace(A,e){if(e!==g.SRGBColorSpace)return;const n=new g.Color;for(let t=0,s=A.count;t<s;t++)n.fromBufferAttribute(A,t),g.ColorManagement.toWorkingColorSpace(n,g.SRGBColorSpace),A.setXYZ(t,n.r,n.g,n.b)}_loadLibrary(A,e){const n=new g.FileLoader(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),n.setWithCredentials(this.withCredentials),new Promise((t,s)=>{n.load(A,t,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const A=typeof WebAssembly!="object"||this.decoderConfig.type==="js",e=[];return A?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then(n=>{const t=n[0];A||(this.decoderConfig.wasmBinary=n[1]);const s=Ft.toString(),i=["/* draco decoder */",t,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([i]))}),this.decoderPending}_getWorker(A,e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const t=new Worker(this.workerSourceURL);t._callbacks={},t._taskCosts={},t._taskLoad=0,t.postMessage({type:"init",decoderConfig:this.decoderConfig}),t.onmessage=function(s){const i=s.data;switch(i.type){case"decode":t._callbacks[i.id].resolve(i);break;case"error":t._callbacks[i.id].reject(i);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+i.type+'"')}},this.workerPool.push(t)}else this.workerPool.sort(function(t,s){return t._taskLoad>s._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[A]=e,n._taskLoad+=e,n})}_releaseTask(A,e){A._taskLoad-=A._taskCosts[e],delete A._callbacks[e],delete A._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map(A=>A._taskLoad))}dispose(){for(let A=0;A<this.workerPool.length;++A)this.workerPool[A].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function Ft(){let r,A;onmessage=function(i){const o=i.data;switch(o.type){case"init":r=o.decoderConfig,A=new Promise(function(c){r.onModuleLoaded=function(B){c({draco:B})},DracoDecoderModule(r)});break;case"decode":const a=o.buffer,I=o.taskConfig;A.then(c=>{const B=c.draco,E=new B.Decoder;try{const u=e(B,E,new Int8Array(a),I),f=u.attributes.map(h=>h.array.buffer);u.index&&f.push(u.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:u},f)}catch(u){console.error(u),self.postMessage({type:"error",id:o.id,error:u.message})}finally{B.destroy(E)}});break}};function e(i,o,a,I){const c=I.attributeIDs,B=I.attributeTypes;let E,u;const f=o.GetEncodedGeometryType(a);if(f===i.TRIANGULAR_MESH)E=new i.Mesh,u=o.DecodeArrayToMesh(a,a.byteLength,E);else if(f===i.POINT_CLOUD)E=new i.PointCloud,u=o.DecodeArrayToPointCloud(a,a.byteLength,E);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!u.ok()||E.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+u.error_msg());const h={index:null,attributes:[]};for(const d in c){const w=self[B[d]];let R,F;if(I.useUniqueIDs)F=c[d],R=o.GetAttributeByUniqueId(E,F);else{if(F=o.GetAttributeId(E,i[c[d]]),F===-1)continue;R=o.GetAttribute(E,F)}const L=t(i,o,E,d,w,R);d==="color"&&(L.vertexColorSpace=I.vertexColorSpace),h.attributes.push(L)}return f===i.TRIANGULAR_MESH&&(h.index=n(i,o,E)),i.destroy(E),h}function n(i,o,a){const c=a.num_faces()*3,B=c*4,E=i._malloc(B);o.GetTrianglesUInt32Array(a,B,E);const u=new Uint32Array(i.HEAPF32.buffer,E,c).slice();return i._free(E),{array:u,itemSize:1}}function t(i,o,a,I,c,B){const E=B.num_components(),f=a.num_points()*E,h=f*c.BYTES_PER_ELEMENT,d=s(i,c),w=i._malloc(h);o.GetAttributeDataArrayForAllPoints(a,B,d,h,w);const R=new c(i.HEAPF32.buffer,w,f).slice();return i._free(w),{name:I,array:R,itemSize:E}}function s(i,o){switch(o){case Float32Array:return i.DT_FLOAT32;case Int8Array:return i.DT_INT8;case Int16Array:return i.DT_INT16;case Int32Array:return i.DT_INT32;case Uint8Array:return i.DT_UINT8;case Uint16Array:return i.DT_UINT16;case Uint32Array:return i.DT_UINT32}}}function Oe(r,A){if(A===g.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),r;if(A===g.TriangleFanDrawMode||A===g.TriangleStripDrawMode){let e=r.getIndex();if(e===null){const i=[],o=r.getAttribute("position");if(o!==void 0){for(let a=0;a<o.count;a++)i.push(a);r.setIndex(i),e=r.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),r}const n=e.count-2,t=[];if(A===g.TriangleFanDrawMode)for(let i=1;i<=n;i++)t.push(e.getX(0)),t.push(e.getX(i)),t.push(e.getX(i+1));else for(let i=0;i<n;i++)i%2===0?(t.push(e.getX(i)),t.push(e.getX(i+1)),t.push(e.getX(i+2))):(t.push(e.getX(i+2)),t.push(e.getX(i+1)),t.push(e.getX(i)));t.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=r.clone();return s.setIndex(t),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",A),r}class Tt extends g.Loader{constructor(A){super(A),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new _t(e)}),this.register(function(e){return new Ut(e)}),this.register(function(e){return new Jt(e)}),this.register(function(e){return new Kt(e)}),this.register(function(e){return new Yt(e)}),this.register(function(e){return new Nt(e)}),this.register(function(e){return new bt(e)}),this.register(function(e){return new vt(e)}),this.register(function(e){return new Ht(e)}),this.register(function(e){return new kt(e)}),this.register(function(e){return new Ot(e)}),this.register(function(e){return new xt(e)}),this.register(function(e){return new Pt(e)}),this.register(function(e){return new qt(e)}),this.register(function(e){return new Lt(e)}),this.register(function(e){return new Vt(e)}),this.register(function(e){return new Xt(e)})}load(A,e,n,t){const s=this;let i;if(this.resourcePath!=="")i=this.resourcePath;else if(this.path!==""){const I=g.LoaderUtils.extractUrlBase(A);i=g.LoaderUtils.resolveURL(I,this.path)}else i=g.LoaderUtils.extractUrlBase(A);this.manager.itemStart(A);const o=function(I){t?t(I):console.error(I),s.manager.itemError(A),s.manager.itemEnd(A)},a=new g.FileLoader(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(A,function(I){try{s.parse(I,i,function(c){e(c),s.manager.itemEnd(A)},o)}catch(c){o(c)}},n,o)}setDRACOLoader(A){return this.dracoLoader=A,this}setKTX2Loader(A){return this.ktx2Loader=A,this}setMeshoptDecoder(A){return this.meshoptDecoder=A,this}register(A){return this.pluginCallbacks.indexOf(A)===-1&&this.pluginCallbacks.push(A),this}unregister(A){return this.pluginCallbacks.indexOf(A)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(A),1),this}parse(A,e,n,t){let s;const i={},o={},a=new TextDecoder;if(typeof A=="string")s=JSON.parse(A);else if(A instanceof ArrayBuffer)if(a.decode(new Uint8Array(A,0,4))===qe){try{i[M.KHR_BINARY_GLTF]=new jt(A)}catch(B){t&&t(B);return}s=JSON.parse(i[M.KHR_BINARY_GLTF].content)}else s=JSON.parse(a.decode(A));else s=A;if(s.asset===void 0||s.asset.version[0]<2){t&&t(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const I=new gn(s,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});I.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const B=this.pluginCallbacks[c](I);B.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[B.name]=B,i[B.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const B=s.extensionsUsed[c],E=s.extensionsRequired||[];switch(B){case M.KHR_MATERIALS_UNLIT:i[B]=new Mt;break;case M.KHR_DRACO_MESH_COMPRESSION:i[B]=new Wt(s,this.dracoLoader);break;case M.KHR_TEXTURE_TRANSFORM:i[B]=new zt;break;case M.KHR_MESH_QUANTIZATION:i[B]=new Zt;break;default:E.indexOf(B)>=0&&o[B]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+B+'".')}}I.setExtensions(i),I.setPlugins(o),I.parse(n,t)}parseAsync(A,e){const n=this;return new Promise(function(t,s){n.parse(A,e,t,s)})}}function Gt(){let r={};return{get:function(A){return r[A]},add:function(A,e){r[A]=e},remove:function(A){delete r[A]},removeAll:function(){r={}}}}const M={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Lt{constructor(A){this.parser=A,this.name=M.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const A=this.parser,e=this.parser.json.nodes||[];for(let n=0,t=e.length;n<t;n++){const s=e[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&A._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(A){const e=this.parser,n="light:"+A;let t=e.cache.get(n);if(t)return t;const s=e.json,a=((s.extensions&&s.extensions[this.name]||{}).lights||[])[A];let I;const c=new g.Color(16777215);a.color!==void 0&&c.setRGB(a.color[0],a.color[1],a.color[2],g.LinearSRGBColorSpace);const B=a.range!==void 0?a.range:0;switch(a.type){case"directional":I=new g.DirectionalLight(c),I.target.position.set(0,0,-1),I.add(I.target);break;case"point":I=new g.PointLight(c),I.distance=B;break;case"spot":I=new g.SpotLight(c),I.distance=B,a.spot=a.spot||{},a.spot.innerConeAngle=a.spot.innerConeAngle!==void 0?a.spot.innerConeAngle:0,a.spot.outerConeAngle=a.spot.outerConeAngle!==void 0?a.spot.outerConeAngle:Math.PI/4,I.angle=a.spot.outerConeAngle,I.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,I.target.position.set(0,0,-1),I.add(I.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return I.position.set(0,0,0),I.decay=2,uA(I,a),a.intensity!==void 0&&(I.intensity=a.intensity),I.name=e.createUniqueName(a.name||"light_"+A),t=Promise.resolve(I),e.cache.add(n,t),t}getDependency(A,e){if(A==="light")return this._loadLight(e)}createNodeAttachment(A){const e=this,n=this.parser,s=n.json.nodes[A],o=(s.extensions&&s.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(a){return n._getNodeRef(e.cache,o,a)})}}class Mt{constructor(){this.name=M.KHR_MATERIALS_UNLIT}getMaterialType(){return g.MeshBasicMaterial}extendParams(A,e,n){const t=[];A.color=new g.Color(1,1,1),A.opacity=1;const s=e.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const i=s.baseColorFactor;A.color.setRGB(i[0],i[1],i[2],g.LinearSRGBColorSpace),A.opacity=i[3]}s.baseColorTexture!==void 0&&t.push(n.assignTexture(A,"map",s.baseColorTexture,g.SRGBColorSpace))}return Promise.all(t)}}class kt{constructor(A){this.parser=A,this.name=M.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(A,e){const t=this.parser.json.materials[A];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const s=t.extensions[this.name].emissiveStrength;return s!==void 0&&(e.emissiveIntensity=s),Promise.resolve()}}class _t{constructor(A){this.parser=A,this.name=M.KHR_MATERIALS_CLEARCOAT}getMaterialType(A){const n=this.parser.json.materials[A];return!n.extensions||!n.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(A,e){const n=this.parser,t=n.json.materials[A];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const s=[],i=t.extensions[this.name];if(i.clearcoatFactor!==void 0&&(e.clearcoat=i.clearcoatFactor),i.clearcoatTexture!==void 0&&s.push(n.assignTexture(e,"clearcoatMap",i.clearcoatTexture)),i.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=i.clearcoatRoughnessFactor),i.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(e,"clearcoatRoughnessMap",i.clearcoatRoughnessTexture)),i.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(e,"clearcoatNormalMap",i.clearcoatNormalTexture)),i.clearcoatNormalTexture.scale!==void 0)){const o=i.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new g.Vector2(o,o)}return Promise.all(s)}}class Ut{constructor(A){this.parser=A,this.name=M.KHR_MATERIALS_DISPERSION}getMaterialType(A){const n=this.parser.json.materials[A];return!n.extensions||!n.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(A,e){const t=this.parser.json.materials[A];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const s=t.extensions[this.name];return e.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class xt{constructor(A){this.parser=A,this.name=M.KHR_MATERIALS_IRIDESCENCE}getMaterialType(A){const n=this.parser.json.materials[A];return!n.extensions||!n.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(A,e){const n=this.parser,t=n.json.materials[A];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const s=[],i=t.extensions[this.name];return i.iridescenceFactor!==void 0&&(e.iridescence=i.iridescenceFactor),i.iridescenceTexture!==void 0&&s.push(n.assignTexture(e,"iridescenceMap",i.iridescenceTexture)),i.iridescenceIor!==void 0&&(e.iridescenceIOR=i.iridescenceIor),e.iridescenceThicknessRange===void 0&&(e.iridescenceThicknessRange=[100,400]),i.iridescenceThicknessMinimum!==void 0&&(e.iridescenceThicknessRange[0]=i.iridescenceThicknessMinimum),i.iridescenceThicknessMaximum!==void 0&&(e.iridescenceThicknessRange[1]=i.iridescenceThicknessMaximum),i.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(e,"iridescenceThicknessMap",i.iridescenceThicknessTexture)),Promise.all(s)}}class Nt{constructor(A){this.parser=A,this.name=M.KHR_MATERIALS_SHEEN}getMaterialType(A){const n=this.parser.json.materials[A];return!n.extensions||!n.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(A,e){const n=this.parser,t=n.json.materials[A];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const s=[];e.sheenColor=new g.Color(0,0,0),e.sheenRoughness=0,e.sheen=1;const i=t.extensions[this.name];if(i.sheenColorFactor!==void 0){const o=i.sheenColorFactor;e.sheenColor.setRGB(o[0],o[1],o[2],g.LinearSRGBColorSpace)}return i.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=i.sheenRoughnessFactor),i.sheenColorTexture!==void 0&&s.push(n.assignTexture(e,"sheenColorMap",i.sheenColorTexture,g.SRGBColorSpace)),i.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(e,"sheenRoughnessMap",i.sheenRoughnessTexture)),Promise.all(s)}}class bt{constructor(A){this.parser=A,this.name=M.KHR_MATERIALS_TRANSMISSION}getMaterialType(A){const n=this.parser.json.materials[A];return!n.extensions||!n.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(A,e){const n=this.parser,t=n.json.materials[A];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const s=[],i=t.extensions[this.name];return i.transmissionFactor!==void 0&&(e.transmission=i.transmissionFactor),i.transmissionTexture!==void 0&&s.push(n.assignTexture(e,"transmissionMap",i.transmissionTexture)),Promise.all(s)}}class vt{constructor(A){this.parser=A,this.name=M.KHR_MATERIALS_VOLUME}getMaterialType(A){const n=this.parser.json.materials[A];return!n.extensions||!n.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(A,e){const n=this.parser,t=n.json.materials[A];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const s=[],i=t.extensions[this.name];e.thickness=i.thicknessFactor!==void 0?i.thicknessFactor:0,i.thicknessTexture!==void 0&&s.push(n.assignTexture(e,"thicknessMap",i.thicknessTexture)),e.attenuationDistance=i.attenuationDistance||1/0;const o=i.attenuationColor||[1,1,1];return e.attenuationColor=new g.Color().setRGB(o[0],o[1],o[2],g.LinearSRGBColorSpace),Promise.all(s)}}class Ht{constructor(A){this.parser=A,this.name=M.KHR_MATERIALS_IOR}getMaterialType(A){const n=this.parser.json.materials[A];return!n.extensions||!n.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(A,e){const t=this.parser.json.materials[A];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const s=t.extensions[this.name];return e.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class Ot{constructor(A){this.parser=A,this.name=M.KHR_MATERIALS_SPECULAR}getMaterialType(A){const n=this.parser.json.materials[A];return!n.extensions||!n.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(A,e){const n=this.parser,t=n.json.materials[A];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const s=[],i=t.extensions[this.name];e.specularIntensity=i.specularFactor!==void 0?i.specularFactor:1,i.specularTexture!==void 0&&s.push(n.assignTexture(e,"specularIntensityMap",i.specularTexture));const o=i.specularColorFactor||[1,1,1];return e.specularColor=new g.Color().setRGB(o[0],o[1],o[2],g.LinearSRGBColorSpace),i.specularColorTexture!==void 0&&s.push(n.assignTexture(e,"specularColorMap",i.specularColorTexture,g.SRGBColorSpace)),Promise.all(s)}}class qt{constructor(A){this.parser=A,this.name=M.EXT_MATERIALS_BUMP}getMaterialType(A){const n=this.parser.json.materials[A];return!n.extensions||!n.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(A,e){const n=this.parser,t=n.json.materials[A];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const s=[],i=t.extensions[this.name];return e.bumpScale=i.bumpFactor!==void 0?i.bumpFactor:1,i.bumpTexture!==void 0&&s.push(n.assignTexture(e,"bumpMap",i.bumpTexture)),Promise.all(s)}}class Pt{constructor(A){this.parser=A,this.name=M.KHR_MATERIALS_ANISOTROPY}getMaterialType(A){const n=this.parser.json.materials[A];return!n.extensions||!n.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(A,e){const n=this.parser,t=n.json.materials[A];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const s=[],i=t.extensions[this.name];return i.anisotropyStrength!==void 0&&(e.anisotropy=i.anisotropyStrength),i.anisotropyRotation!==void 0&&(e.anisotropyRotation=i.anisotropyRotation),i.anisotropyTexture!==void 0&&s.push(n.assignTexture(e,"anisotropyMap",i.anisotropyTexture)),Promise.all(s)}}class Jt{constructor(A){this.parser=A,this.name=M.KHR_TEXTURE_BASISU}loadTexture(A){const e=this.parser,n=e.json,t=n.textures[A];if(!t.extensions||!t.extensions[this.name])return null;const s=t.extensions[this.name],i=e.options.ktx2Loader;if(!i){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(A,s.source,i)}}class Kt{constructor(A){this.parser=A,this.name=M.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(A){const e=this.name,n=this.parser,t=n.json,s=t.textures[A];if(!s.extensions||!s.extensions[e])return null;const i=s.extensions[e],o=t.images[i.source];let a=n.textureLoader;if(o.uri){const I=n.options.manager.getHandler(o.uri);I!==null&&(a=I)}return this.detectSupport().then(function(I){if(I)return n.loadTextureImage(A,i.source,a);if(t.extensionsRequired&&t.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(A)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(A){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){A(e.height===1)}})),this.isSupported}}class Yt{constructor(A){this.parser=A,this.name=M.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(A){const e=this.name,n=this.parser,t=n.json,s=t.textures[A];if(!s.extensions||!s.extensions[e])return null;const i=s.extensions[e],o=t.images[i.source];let a=n.textureLoader;if(o.uri){const I=n.options.manager.getHandler(o.uri);I!==null&&(a=I)}return this.detectSupport().then(function(I){if(I)return n.loadTextureImage(A,i.source,a);if(t.extensionsRequired&&t.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(A)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(A){const e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){A(e.height===1)}})),this.isSupported}}class Vt{constructor(A){this.name=M.EXT_MESHOPT_COMPRESSION,this.parser=A}loadBufferView(A){const e=this.parser.json,n=e.bufferViews[A];if(n.extensions&&n.extensions[this.name]){const t=n.extensions[this.name],s=this.parser.getDependency("buffer",t.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(o){const a=t.byteOffset||0,I=t.byteLength||0,c=t.count,B=t.byteStride,E=new Uint8Array(o,a,I);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(c,B,E,t.mode,t.filter).then(function(u){return u.buffer}):i.ready.then(function(){const u=new ArrayBuffer(c*B);return i.decodeGltfBuffer(new Uint8Array(u),c,B,E,t.mode,t.filter),u})})}else return null}}class Xt{constructor(A){this.name=M.EXT_MESH_GPU_INSTANCING,this.parser=A}createNodeMesh(A){const e=this.parser.json,n=e.nodes[A];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const t=e.meshes[n.mesh];for(const I of t.primitives)if(I.mode!==rA.TRIANGLES&&I.mode!==rA.TRIANGLE_STRIP&&I.mode!==rA.TRIANGLE_FAN&&I.mode!==void 0)return null;const i=n.extensions[this.name].attributes,o=[],a={};for(const I in i)o.push(this.parser.getDependency("accessor",i[I]).then(c=>(a[I]=c,a[I])));return o.length<1?null:(o.push(this.parser.createNodeMesh(A)),Promise.all(o).then(I=>{const c=I.pop(),B=c.isGroup?c.children:[c],E=I[0].count,u=[];for(const f of B){const h=new g.Matrix4,d=new g.Vector3,w=new g.Quaternion,R=new g.Vector3(1,1,1),F=new g.InstancedMesh(f.geometry,f.material,E);for(let L=0;L<E;L++)a.TRANSLATION&&d.fromBufferAttribute(a.TRANSLATION,L),a.ROTATION&&w.fromBufferAttribute(a.ROTATION,L),a.SCALE&&R.fromBufferAttribute(a.SCALE,L),F.setMatrixAt(L,h.compose(d,w,R));for(const L in a)if(L==="_COLOR_0"){const N=a[L];F.instanceColor=new g.InstancedBufferAttribute(N.array,N.itemSize,N.normalized)}else L!=="TRANSLATION"&&L!=="ROTATION"&&L!=="SCALE"&&f.geometry.setAttribute(L,a[L]);g.Object3D.prototype.copy.call(F,f),this.parser.assignFinalMaterial(F),u.push(F)}return c.isGroup?(c.clear(),c.add(...u),c):u[0]}))}}const qe="glTF",kA=12,Pe={JSON:1313821514,BIN:5130562};class jt{constructor(A){this.name=M.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(A,0,kA),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(A.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==qe)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const t=this.header.length-kA,s=new DataView(A,kA);let i=0;for(;i<t;){const o=s.getUint32(i,!0);i+=4;const a=s.getUint32(i,!0);if(i+=4,a===Pe.JSON){const I=new Uint8Array(A,kA+i,o);this.content=n.decode(I)}else if(a===Pe.BIN){const I=kA+i;this.body=A.slice(I,I+o)}i+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Wt{constructor(A,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=M.KHR_DRACO_MESH_COMPRESSION,this.json=A,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(A,e){const n=this.json,t=this.dracoLoader,s=A.extensions[this.name].bufferView,i=A.extensions[this.name].attributes,o={},a={},I={};for(const c in i){const B=$A[c]||c.toLowerCase();o[B]=i[c]}for(const c in A.attributes){const B=$A[c]||c.toLowerCase();if(i[c]!==void 0){const E=n.accessors[A.attributes[c]],u=TA[E.componentType];I[B]=u.name,a[B]=E.normalized===!0}}return e.getDependency("bufferView",s).then(function(c){return new Promise(function(B,E){t.decodeDracoFile(c,function(u){for(const f in u.attributes){const h=u.attributes[f],d=a[f];d!==void 0&&(h.normalized=d)}B(u)},o,I,g.LinearSRGBColorSpace,E)})})}}class zt{constructor(){this.name=M.KHR_TEXTURE_TRANSFORM}extendTexture(A,e){return(e.texCoord===void 0||e.texCoord===A.channel)&&e.offset===void 0&&e.rotation===void 0&&e.scale===void 0||(A=A.clone(),e.texCoord!==void 0&&(A.channel=e.texCoord),e.offset!==void 0&&A.offset.fromArray(e.offset),e.rotation!==void 0&&(A.rotation=e.rotation),e.scale!==void 0&&A.repeat.fromArray(e.scale),A.needsUpdate=!0),A}}class Zt{constructor(){this.name=M.KHR_MESH_QUANTIZATION}}class Je extends g.Interpolant{constructor(A,e,n,t){super(A,e,n,t)}copySampleValue_(A){const e=this.resultBuffer,n=this.sampleValues,t=this.valueSize,s=A*t*3+t;for(let i=0;i!==t;i++)e[i]=n[s+i];return e}interpolate_(A,e,n,t){const s=this.resultBuffer,i=this.sampleValues,o=this.valueSize,a=o*2,I=o*3,c=t-e,B=(n-e)/c,E=B*B,u=E*B,f=A*I,h=f-I,d=-2*u+3*E,w=u-E,R=1-d,F=w-E+B;for(let L=0;L!==o;L++){const N=i[h+L+o],b=i[h+L+a]*c,J=i[f+L+o],$=i[f+L]*c;s[L]=R*N+F*b+d*J+w*$}return s}}const $t=new g.Quaternion;class An extends Je{interpolate_(A,e,n,t){const s=super.interpolate_(A,e,n,t);return $t.fromArray(s).normalize().toArray(s),s}}const rA={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},TA={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Ke={9728:g.NearestFilter,9729:g.LinearFilter,9984:g.NearestMipmapNearestFilter,9985:g.LinearMipmapNearestFilter,9986:g.NearestMipmapLinearFilter,9987:g.LinearMipmapLinearFilter},Ye={33071:g.ClampToEdgeWrapping,33648:g.MirroredRepeatWrapping,10497:g.RepeatWrapping},ZA={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},$A={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},hA={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},en={CUBICSPLINE:void 0,LINEAR:g.InterpolateLinear,STEP:g.InterpolateDiscrete},Ae={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function tn(r){return r.DefaultMaterial===void 0&&(r.DefaultMaterial=new g.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:g.FrontSide})),r.DefaultMaterial}function mA(r,A,e){for(const n in e.extensions)r[n]===void 0&&(A.userData.gltfExtensions=A.userData.gltfExtensions||{},A.userData.gltfExtensions[n]=e.extensions[n])}function uA(r,A){A.extras!==void 0&&(typeof A.extras=="object"?Object.assign(r.userData,A.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+A.extras))}function nn(r,A,e){let n=!1,t=!1,s=!1;for(let I=0,c=A.length;I<c;I++){const B=A[I];if(B.POSITION!==void 0&&(n=!0),B.NORMAL!==void 0&&(t=!0),B.COLOR_0!==void 0&&(s=!0),n&&t&&s)break}if(!n&&!t&&!s)return Promise.resolve(r);const i=[],o=[],a=[];for(let I=0,c=A.length;I<c;I++){const B=A[I];if(n){const E=B.POSITION!==void 0?e.getDependency("accessor",B.POSITION):r.attributes.position;i.push(E)}if(t){const E=B.NORMAL!==void 0?e.getDependency("accessor",B.NORMAL):r.attributes.normal;o.push(E)}if(s){const E=B.COLOR_0!==void 0?e.getDependency("accessor",B.COLOR_0):r.attributes.color;a.push(E)}}return Promise.all([Promise.all(i),Promise.all(o),Promise.all(a)]).then(function(I){const c=I[0],B=I[1],E=I[2];return n&&(r.morphAttributes.position=c),t&&(r.morphAttributes.normal=B),s&&(r.morphAttributes.color=E),r.morphTargetsRelative=!0,r})}function sn(r,A){if(r.updateMorphTargets(),A.weights!==void 0)for(let e=0,n=A.weights.length;e<n;e++)r.morphTargetInfluences[e]=A.weights[e];if(A.extras&&Array.isArray(A.extras.targetNames)){const e=A.extras.targetNames;if(r.morphTargetInfluences.length===e.length){r.morphTargetDictionary={};for(let n=0,t=e.length;n<t;n++)r.morphTargetDictionary[e[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function rn(r){let A;const e=r.extensions&&r.extensions[M.KHR_DRACO_MESH_COMPRESSION];if(e?A="draco:"+e.bufferView+":"+e.indices+":"+ee(e.attributes):A=r.indices+":"+ee(r.attributes)+":"+r.mode,r.targets!==void 0)for(let n=0,t=r.targets.length;n<t;n++)A+=":"+ee(r.targets[n]);return A}function ee(r){let A="";const e=Object.keys(r).sort();for(let n=0,t=e.length;n<t;n++)A+=e[n]+":"+r[e[n]]+";";return A}function te(r){switch(r){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function on(r){return r.search(/\.jpe?g($|\?)/i)>0||r.search(/^data\:image\/jpeg/)===0?"image/jpeg":r.search(/\.webp($|\?)/i)>0||r.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const an=new g.Matrix4;class gn{constructor(A={},e={}){this.json=A,this.extensions={},this.plugins={},this.options=e,this.cache=new Gt,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,t=-1,s=!1,i=-1;if(typeof navigator<"u"){const o=navigator.userAgent;n=/^((?!chrome|android).)*safari/i.test(o)===!0;const a=o.match(/Version\/(\d+)/);t=n&&a?parseInt(a[1],10):-1,s=o.indexOf("Firefox")>-1,i=s?o.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||n&&t<17||s&&i<98?this.textureLoader=new g.TextureLoader(this.options.manager):this.textureLoader=new g.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new g.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(A){this.extensions=A}setPlugins(A){this.plugins=A}parse(A,e){const n=this,t=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(i){return i._markDefs&&i._markDefs()}),Promise.all(this._invokeAll(function(i){return i.beforeRoot&&i.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(i){const o={scene:i[0][t.scene||0],scenes:i[0],animations:i[1],cameras:i[2],asset:t.asset,parser:n,userData:{}};return mA(s,o,t),uA(o,t),Promise.all(n._invokeAll(function(a){return a.afterRoot&&a.afterRoot(o)})).then(function(){for(const a of o.scenes)a.updateMatrixWorld();A(o)})}).catch(e)}_markDefs(){const A=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let t=0,s=e.length;t<s;t++){const i=e[t].joints;for(let o=0,a=i.length;o<a;o++)A[i[o]].isBone=!0}for(let t=0,s=A.length;t<s;t++){const i=A[t];i.mesh!==void 0&&(this._addNodeRef(this.meshCache,i.mesh),i.skin!==void 0&&(n[i.mesh].isSkinnedMesh=!0)),i.camera!==void 0&&this._addNodeRef(this.cameraCache,i.camera)}}_addNodeRef(A,e){e!==void 0&&(A.refs[e]===void 0&&(A.refs[e]=A.uses[e]=0),A.refs[e]++)}_getNodeRef(A,e,n){if(A.refs[e]<=1)return n;const t=n.clone(),s=(i,o)=>{const a=this.associations.get(i);a!=null&&this.associations.set(o,a);for(const[I,c]of i.children.entries())s(c,o.children[I])};return s(n,t),t.name+="_instance_"+A.uses[e]++,t}_invokeOne(A){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const t=A(e[n]);if(t)return t}return null}_invokeAll(A){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let t=0;t<e.length;t++){const s=A(e[t]);s&&n.push(s)}return n}getDependency(A,e){const n=A+":"+e;let t=this.cache.get(n);if(!t){switch(A){case"scene":t=this.loadScene(e);break;case"node":t=this._invokeOne(function(s){return s.loadNode&&s.loadNode(e)});break;case"mesh":t=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(e)});break;case"accessor":t=this.loadAccessor(e);break;case"bufferView":t=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(e)});break;case"buffer":t=this.loadBuffer(e);break;case"material":t=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(e)});break;case"texture":t=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(e)});break;case"skin":t=this.loadSkin(e);break;case"animation":t=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(e)});break;case"camera":t=this.loadCamera(e);break;default:if(t=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(A,e)}),!t)throw new Error("Unknown type: "+A);break}this.cache.add(n,t)}return t}getDependencies(A){let e=this.cache.get(A);if(!e){const n=this,t=this.json[A+(A==="mesh"?"es":"s")]||[];e=Promise.all(t.map(function(s,i){return n.getDependency(A,i)})),this.cache.add(A,e)}return e}loadBuffer(A){const e=this.json.buffers[A],n=this.fileLoader;if(e.type&&e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(e.uri===void 0&&A===0)return Promise.resolve(this.extensions[M.KHR_BINARY_GLTF].body);const t=this.options;return new Promise(function(s,i){n.load(g.LoaderUtils.resolveURL(e.uri,t.path),s,void 0,function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(A){const e=this.json.bufferViews[A];return this.getDependency("buffer",e.buffer).then(function(n){const t=e.byteLength||0,s=e.byteOffset||0;return n.slice(s,s+t)})}loadAccessor(A){const e=this,n=this.json,t=this.json.accessors[A];if(t.bufferView===void 0&&t.sparse===void 0){const i=ZA[t.type],o=TA[t.componentType],a=t.normalized===!0,I=new o(t.count*i);return Promise.resolve(new g.BufferAttribute(I,i,a))}const s=[];return t.bufferView!==void 0?s.push(this.getDependency("bufferView",t.bufferView)):s.push(null),t.sparse!==void 0&&(s.push(this.getDependency("bufferView",t.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",t.sparse.values.bufferView))),Promise.all(s).then(function(i){const o=i[0],a=ZA[t.type],I=TA[t.componentType],c=I.BYTES_PER_ELEMENT,B=c*a,E=t.byteOffset||0,u=t.bufferView!==void 0?n.bufferViews[t.bufferView].byteStride:void 0,f=t.normalized===!0;let h,d;if(u&&u!==B){const w=Math.floor(E/u),R="InterleavedBuffer:"+t.bufferView+":"+t.componentType+":"+w+":"+t.count;let F=e.cache.get(R);F||(h=new I(o,w*u,t.count*u/c),F=new g.InterleavedBuffer(h,u/c),e.cache.add(R,F)),d=new g.InterleavedBufferAttribute(F,a,E%u/c,f)}else o===null?h=new I(t.count*a):h=new I(o,E,t.count*a),d=new g.BufferAttribute(h,a,f);if(t.sparse!==void 0){const w=ZA.SCALAR,R=TA[t.sparse.indices.componentType],F=t.sparse.indices.byteOffset||0,L=t.sparse.values.byteOffset||0,N=new R(i[1],F,t.sparse.count*w),b=new I(i[2],L,t.sparse.count*a);o!==null&&(d=new g.BufferAttribute(d.array.slice(),d.itemSize,d.normalized)),d.normalized=!1;for(let J=0,$=N.length;J<$;J++){const P=N[J];if(d.setX(P,b[J*a]),a>=2&&d.setY(P,b[J*a+1]),a>=3&&d.setZ(P,b[J*a+2]),a>=4&&d.setW(P,b[J*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}d.normalized=f}return d})}loadTexture(A){const e=this.json,n=this.options,s=e.textures[A].source,i=e.images[s];let o=this.textureLoader;if(i.uri){const a=n.manager.getHandler(i.uri);a!==null&&(o=a)}return this.loadTextureImage(A,s,o)}loadTextureImage(A,e,n){const t=this,s=this.json,i=s.textures[A],o=s.images[e],a=(o.uri||o.bufferView)+":"+i.sampler;if(this.textureCache[a])return this.textureCache[a];const I=this.loadImageSource(e,n).then(function(c){c.flipY=!1,c.name=i.name||o.name||"",c.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(c.name=o.uri);const E=(s.samplers||{})[i.sampler]||{};return c.magFilter=Ke[E.magFilter]||g.LinearFilter,c.minFilter=Ke[E.minFilter]||g.LinearMipmapLinearFilter,c.wrapS=Ye[E.wrapS]||g.RepeatWrapping,c.wrapT=Ye[E.wrapT]||g.RepeatWrapping,t.associations.set(c,{textures:A}),c}).catch(function(){return null});return this.textureCache[a]=I,I}loadImageSource(A,e){const n=this,t=this.json,s=this.options;if(this.sourceCache[A]!==void 0)return this.sourceCache[A].then(B=>B.clone());const i=t.images[A],o=self.URL||self.webkitURL;let a=i.uri||"",I=!1;if(i.bufferView!==void 0)a=n.getDependency("bufferView",i.bufferView).then(function(B){I=!0;const E=new Blob([B],{type:i.mimeType});return a=o.createObjectURL(E),a});else if(i.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+A+" is missing URI and bufferView");const c=Promise.resolve(a).then(function(B){return new Promise(function(E,u){let f=E;e.isImageBitmapLoader===!0&&(f=function(h){const d=new g.Texture(h);d.needsUpdate=!0,E(d)}),e.load(g.LoaderUtils.resolveURL(B,s.path),f,void 0,u)})}).then(function(B){return I===!0&&o.revokeObjectURL(a),uA(B,i),B.userData.mimeType=i.mimeType||on(i.uri),B}).catch(function(B){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),B});return this.sourceCache[A]=c,c}assignTexture(A,e,n,t){const s=this;return this.getDependency("texture",n.index).then(function(i){if(!i)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(i=i.clone(),i.channel=n.texCoord),s.extensions[M.KHR_TEXTURE_TRANSFORM]){const o=n.extensions!==void 0?n.extensions[M.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const a=s.associations.get(i);i=s.extensions[M.KHR_TEXTURE_TRANSFORM].extendTexture(i,o),s.associations.set(i,a)}}return t!==void 0&&(i.colorSpace=t),A[e]=i,i})}assignFinalMaterial(A){const e=A.geometry;let n=A.material;const t=e.attributes.tangent===void 0,s=e.attributes.color!==void 0,i=e.attributes.normal===void 0;if(A.isPoints){const o="PointsMaterial:"+n.uuid;let a=this.cache.get(o);a||(a=new g.PointsMaterial,g.Material.prototype.copy.call(a,n),a.color.copy(n.color),a.map=n.map,a.sizeAttenuation=!1,this.cache.add(o,a)),n=a}else if(A.isLine){const o="LineBasicMaterial:"+n.uuid;let a=this.cache.get(o);a||(a=new g.LineBasicMaterial,g.Material.prototype.copy.call(a,n),a.color.copy(n.color),a.map=n.map,this.cache.add(o,a)),n=a}if(t||s||i){let o="ClonedMaterial:"+n.uuid+":";t&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),i&&(o+="flat-shading:");let a=this.cache.get(o);a||(a=n.clone(),s&&(a.vertexColors=!0),i&&(a.flatShading=!0),t&&(a.normalScale&&(a.normalScale.y*=-1),a.clearcoatNormalScale&&(a.clearcoatNormalScale.y*=-1)),this.cache.add(o,a),this.associations.set(a,this.associations.get(n))),n=a}A.material=n}getMaterialType(){return g.MeshStandardMaterial}loadMaterial(A){const e=this,n=this.json,t=this.extensions,s=n.materials[A];let i;const o={},a=s.extensions||{},I=[];if(a[M.KHR_MATERIALS_UNLIT]){const B=t[M.KHR_MATERIALS_UNLIT];i=B.getMaterialType(),I.push(B.extendParams(o,s,e))}else{const B=s.pbrMetallicRoughness||{};if(o.color=new g.Color(1,1,1),o.opacity=1,Array.isArray(B.baseColorFactor)){const E=B.baseColorFactor;o.color.setRGB(E[0],E[1],E[2],g.LinearSRGBColorSpace),o.opacity=E[3]}B.baseColorTexture!==void 0&&I.push(e.assignTexture(o,"map",B.baseColorTexture,g.SRGBColorSpace)),o.metalness=B.metallicFactor!==void 0?B.metallicFactor:1,o.roughness=B.roughnessFactor!==void 0?B.roughnessFactor:1,B.metallicRoughnessTexture!==void 0&&(I.push(e.assignTexture(o,"metalnessMap",B.metallicRoughnessTexture)),I.push(e.assignTexture(o,"roughnessMap",B.metallicRoughnessTexture))),i=this._invokeOne(function(E){return E.getMaterialType&&E.getMaterialType(A)}),I.push(Promise.all(this._invokeAll(function(E){return E.extendMaterialParams&&E.extendMaterialParams(A,o)})))}s.doubleSided===!0&&(o.side=g.DoubleSide);const c=s.alphaMode||Ae.OPAQUE;if(c===Ae.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,c===Ae.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&i!==g.MeshBasicMaterial&&(I.push(e.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new g.Vector2(1,1),s.normalTexture.scale!==void 0)){const B=s.normalTexture.scale;o.normalScale.set(B,B)}if(s.occlusionTexture!==void 0&&i!==g.MeshBasicMaterial&&(I.push(e.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&i!==g.MeshBasicMaterial){const B=s.emissiveFactor;o.emissive=new g.Color().setRGB(B[0],B[1],B[2],g.LinearSRGBColorSpace)}return s.emissiveTexture!==void 0&&i!==g.MeshBasicMaterial&&I.push(e.assignTexture(o,"emissiveMap",s.emissiveTexture,g.SRGBColorSpace)),Promise.all(I).then(function(){const B=new i(o);return s.name&&(B.name=s.name),uA(B,s),e.associations.set(B,{materials:A}),s.extensions&&mA(t,B,s),B})}createUniqueName(A){const e=g.PropertyBinding.sanitizeNodeName(A||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(A){const e=this,n=this.extensions,t=this.primitiveCache;function s(o){return n[M.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,e).then(function(a){return Ve(a,o,e)})}const i=[];for(let o=0,a=A.length;o<a;o++){const I=A[o],c=rn(I),B=t[c];if(B)i.push(B.promise);else{let E;I.extensions&&I.extensions[M.KHR_DRACO_MESH_COMPRESSION]?E=s(I):E=Ve(new g.BufferGeometry,I,e),t[c]={primitive:I,promise:E},i.push(E)}}return Promise.all(i)}loadMesh(A){const e=this,n=this.json,t=this.extensions,s=n.meshes[A],i=s.primitives,o=[];for(let a=0,I=i.length;a<I;a++){const c=i[a].material===void 0?tn(this.cache):this.getDependency("material",i[a].material);o.push(c)}return o.push(e.loadGeometries(i)),Promise.all(o).then(function(a){const I=a.slice(0,a.length-1),c=a[a.length-1],B=[];for(let u=0,f=c.length;u<f;u++){const h=c[u],d=i[u];let w;const R=I[u];if(d.mode===rA.TRIANGLES||d.mode===rA.TRIANGLE_STRIP||d.mode===rA.TRIANGLE_FAN||d.mode===void 0)w=s.isSkinnedMesh===!0?new g.SkinnedMesh(h,R):new g.Mesh(h,R),w.isSkinnedMesh===!0&&w.normalizeSkinWeights(),d.mode===rA.TRIANGLE_STRIP?w.geometry=Oe(w.geometry,g.TriangleStripDrawMode):d.mode===rA.TRIANGLE_FAN&&(w.geometry=Oe(w.geometry,g.TriangleFanDrawMode));else if(d.mode===rA.LINES)w=new g.LineSegments(h,R);else if(d.mode===rA.LINE_STRIP)w=new g.Line(h,R);else if(d.mode===rA.LINE_LOOP)w=new g.LineLoop(h,R);else if(d.mode===rA.POINTS)w=new g.Points(h,R);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+d.mode);Object.keys(w.geometry.morphAttributes).length>0&&sn(w,s),w.name=e.createUniqueName(s.name||"mesh_"+A),uA(w,s),d.extensions&&mA(t,w,d),e.assignFinalMaterial(w),B.push(w)}for(let u=0,f=B.length;u<f;u++)e.associations.set(B[u],{meshes:A,primitives:u});if(B.length===1)return s.extensions&&mA(t,B[0],s),B[0];const E=new g.Group;s.extensions&&mA(t,E,s),e.associations.set(E,{meshes:A});for(let u=0,f=B.length;u<f;u++)E.add(B[u]);return E})}loadCamera(A){let e;const n=this.json.cameras[A],t=n[n.type];if(!t){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?e=new g.PerspectiveCamera(g.MathUtils.radToDeg(t.yfov),t.aspectRatio||1,t.znear||1,t.zfar||2e6):n.type==="orthographic"&&(e=new g.OrthographicCamera(-t.xmag,t.xmag,t.ymag,-t.ymag,t.znear,t.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),uA(e,n),Promise.resolve(e)}loadSkin(A){const e=this.json.skins[A],n=[];for(let t=0,s=e.joints.length;t<s;t++)n.push(this._loadNodeShallow(e.joints[t]));return e.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",e.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(t){const s=t.pop(),i=t,o=[],a=[];for(let I=0,c=i.length;I<c;I++){const B=i[I];if(B){o.push(B);const E=new g.Matrix4;s!==null&&E.fromArray(s.array,I*16),a.push(E)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[I])}return new g.Skeleton(o,a)})}loadAnimation(A){const e=this.json,n=this,t=e.animations[A],s=t.name?t.name:"animation_"+A,i=[],o=[],a=[],I=[],c=[];for(let B=0,E=t.channels.length;B<E;B++){const u=t.channels[B],f=t.samplers[u.sampler],h=u.target,d=h.node,w=t.parameters!==void 0?t.parameters[f.input]:f.input,R=t.parameters!==void 0?t.parameters[f.output]:f.output;h.node!==void 0&&(i.push(this.getDependency("node",d)),o.push(this.getDependency("accessor",w)),a.push(this.getDependency("accessor",R)),I.push(f),c.push(h))}return Promise.all([Promise.all(i),Promise.all(o),Promise.all(a),Promise.all(I),Promise.all(c)]).then(function(B){const E=B[0],u=B[1],f=B[2],h=B[3],d=B[4],w=[];for(let R=0,F=E.length;R<F;R++){const L=E[R],N=u[R],b=f[R],J=h[R],$=d[R];if(L===void 0)continue;L.updateMatrix&&L.updateMatrix();const P=n._createAnimationTracks(L,N,b,J,$);if(P)for(let AA=0;AA<P.length;AA++)w.push(P[AA])}return new g.AnimationClip(s,void 0,w)})}createNodeMesh(A){const e=this.json,n=this,t=e.nodes[A];return t.mesh===void 0?null:n.getDependency("mesh",t.mesh).then(function(s){const i=n._getNodeRef(n.meshCache,t.mesh,s);return t.weights!==void 0&&i.traverse(function(o){if(o.isMesh)for(let a=0,I=t.weights.length;a<I;a++)o.morphTargetInfluences[a]=t.weights[a]}),i})}loadNode(A){const e=this.json,n=this,t=e.nodes[A],s=n._loadNodeShallow(A),i=[],o=t.children||[];for(let I=0,c=o.length;I<c;I++)i.push(n.getDependency("node",o[I]));const a=t.skin===void 0?Promise.resolve(null):n.getDependency("skin",t.skin);return Promise.all([s,Promise.all(i),a]).then(function(I){const c=I[0],B=I[1],E=I[2];E!==null&&c.traverse(function(u){u.isSkinnedMesh&&u.bind(E,an)});for(let u=0,f=B.length;u<f;u++)c.add(B[u]);return c})}_loadNodeShallow(A){const e=this.json,n=this.extensions,t=this;if(this.nodeCache[A]!==void 0)return this.nodeCache[A];const s=e.nodes[A],i=s.name?t.createUniqueName(s.name):"",o=[],a=t._invokeOne(function(I){return I.createNodeMesh&&I.createNodeMesh(A)});return a&&o.push(a),s.camera!==void 0&&o.push(t.getDependency("camera",s.camera).then(function(I){return t._getNodeRef(t.cameraCache,s.camera,I)})),t._invokeAll(function(I){return I.createNodeAttachment&&I.createNodeAttachment(A)}).forEach(function(I){o.push(I)}),this.nodeCache[A]=Promise.all(o).then(function(I){let c;if(s.isBone===!0?c=new g.Bone:I.length>1?c=new g.Group:I.length===1?c=I[0]:c=new g.Object3D,c!==I[0])for(let B=0,E=I.length;B<E;B++)c.add(I[B]);if(s.name&&(c.userData.name=s.name,c.name=i),uA(c,s),s.extensions&&mA(n,c,s),s.matrix!==void 0){const B=new g.Matrix4;B.fromArray(s.matrix),c.applyMatrix4(B)}else s.translation!==void 0&&c.position.fromArray(s.translation),s.rotation!==void 0&&c.quaternion.fromArray(s.rotation),s.scale!==void 0&&c.scale.fromArray(s.scale);return t.associations.has(c)||t.associations.set(c,{}),t.associations.get(c).nodes=A,c}),this.nodeCache[A]}loadScene(A){const e=this.extensions,n=this.json.scenes[A],t=this,s=new g.Group;n.name&&(s.name=t.createUniqueName(n.name)),uA(s,n),n.extensions&&mA(e,s,n);const i=n.nodes||[],o=[];for(let a=0,I=i.length;a<I;a++)o.push(t.getDependency("node",i[a]));return Promise.all(o).then(function(a){for(let c=0,B=a.length;c<B;c++)s.add(a[c]);const I=c=>{const B=new Map;for(const[E,u]of t.associations)(E instanceof g.Material||E instanceof g.Texture)&&B.set(E,u);return c.traverse(E=>{const u=t.associations.get(E);u!=null&&B.set(E,u)}),B};return t.associations=I(s),s})}_createAnimationTracks(A,e,n,t,s){const i=[],o=A.name?A.name:A.uuid,a=[];hA[s.path]===hA.weights?A.traverse(function(E){E.morphTargetInfluences&&a.push(E.name?E.name:E.uuid)}):a.push(o);let I;switch(hA[s.path]){case hA.weights:I=g.NumberKeyframeTrack;break;case hA.rotation:I=g.QuaternionKeyframeTrack;break;case hA.position:case hA.scale:I=g.VectorKeyframeTrack;break;default:switch(n.itemSize){case 1:I=g.NumberKeyframeTrack;break;case 2:case 3:default:I=g.VectorKeyframeTrack;break}break}const c=t.interpolation!==void 0?en[t.interpolation]:g.InterpolateLinear,B=this._getArrayFromAccessor(n);for(let E=0,u=a.length;E<u;E++){const f=new I(a[E]+"."+hA[s.path],e.array,B,c);t.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(f),i.push(f)}return i}_getArrayFromAccessor(A){let e=A.array;if(A.normalized){const n=te(e.constructor),t=new Float32Array(e.length);for(let s=0,i=e.length;s<i;s++)t[s]=e[s]*n;e=t}return e}_createCubicSplineTrackInterpolant(A){A.createInterpolant=function(n){const t=this instanceof g.QuaternionKeyframeTrack?An:Je;return new t(this.times,this.values,this.getValueSize()/3,n)},A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function In(r,A,e){const n=A.attributes,t=new g.Box3;if(n.POSITION!==void 0){const o=e.json.accessors[n.POSITION],a=o.min,I=o.max;if(a!==void 0&&I!==void 0){if(t.set(new g.Vector3(a[0],a[1],a[2]),new g.Vector3(I[0],I[1],I[2])),o.normalized){const c=te(TA[o.componentType]);t.min.multiplyScalar(c),t.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=A.targets;if(s!==void 0){const o=new g.Vector3,a=new g.Vector3;for(let I=0,c=s.length;I<c;I++){const B=s[I];if(B.POSITION!==void 0){const E=e.json.accessors[B.POSITION],u=E.min,f=E.max;if(u!==void 0&&f!==void 0){if(a.setX(Math.max(Math.abs(u[0]),Math.abs(f[0]))),a.setY(Math.max(Math.abs(u[1]),Math.abs(f[1]))),a.setZ(Math.max(Math.abs(u[2]),Math.abs(f[2]))),E.normalized){const h=te(TA[E.componentType]);a.multiplyScalar(h)}o.max(a)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}t.expandByVector(o)}r.boundingBox=t;const i=new g.Sphere;t.getCenter(i.center),i.radius=t.min.distanceTo(t.max)/2,r.boundingSphere=i}function Ve(r,A,e){const n=A.attributes,t=[];function s(i,o){return e.getDependency("accessor",i).then(function(a){r.setAttribute(o,a)})}for(const i in n){const o=$A[i]||i.toLowerCase();o in r.attributes||t.push(s(n[i],o))}if(A.indices!==void 0&&!r.index){const i=e.getDependency("accessor",A.indices).then(function(o){r.setIndex(o)});t.push(i)}return g.ColorManagement.workingColorSpace!==g.LinearSRGBColorSpace&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${g.ColorManagement.workingColorSpace}" not supported.`),uA(r,A),In(r,A,e),Promise.all(t).then(function(){return A.targets!==void 0?nn(r,A.targets,e):r})}const x=class x{static getInstance(){return x._instance===null&&(x._instance=new x,x._gltfLoader.setDRACOLoader(x._dracoLoader),x._dracoLoader.setDecoderPath(`${x._base}draco/`),x._ktx2Loader.setTranscoderPath(`${x._base}basis/`)),x._instance}static initKTX2Loader(A){x._ktx2Loader.detectSupport(A)}get loaderManager(){return x._loaderManager}async loadTexture(A,e=!1){return x._imageLoader.loadAsync(`${e?`${x._base}${A}`:`${A}`}`)}async loadGPUTexture(A){return x._ktx2Loader.loadAsync(`${x._base}${A}`)}async loadEnvironmentMap(A){return x._ktx2Loader.loadAsync(`${x._base}${A}`)}async loadGLTFModel(A){return x._gltfLoader.loadAsync(`${x._base}${A}`)}async parseGLTFModel(A,e){return x._gltfLoader.parseAsync(A,e)}};z(x,"_instance",null),z(x,"_loaderManager",new g.LoadingManager),z(x,"_dracoLoader",new St(x._loaderManager)),z(x,"_gltfLoader",new Tt(x._loaderManager)),z(x,"_ktx2Loader",new CA(x._loaderManager)),z(x,"_imageLoader",new g.TextureLoader(x._loaderManager)),z(x,"_base","/");let GA=x;var sA=Uint8Array,LA=Uint16Array,Bn=Int32Array,Xe=new sA([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),je=new sA([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),cn=new sA([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),We=function(r,A){for(var e=new LA(31),n=0;n<31;++n)e[n]=A+=1<<r[n-1];for(var t=new Bn(e[30]),n=1;n<30;++n)for(var s=e[n];s<e[n+1];++s)t[s]=s-e[n]<<5|n;return{b:e,r:t}},ze=We(Xe,2),Ze=ze.b,Cn=ze.r;Ze[28]=258,Cn[258]=28;for(var En=We(je,0),Qn=En.b,ne=new LA(32768),H=0;H<32768;++H){var pA=(H&43690)>>1|(H&21845)<<1;pA=(pA&52428)>>2|(pA&13107)<<2,pA=(pA&61680)>>4|(pA&3855)<<4,ne[H]=((pA&65280)>>8|(pA&255)<<8)>>1}for(var _A=function(r,A,e){for(var n=r.length,t=0,s=new LA(A);t<n;++t)r[t]&&++s[r[t]-1];var i=new LA(A);for(t=1;t<A;++t)i[t]=i[t-1]+s[t-1]<<1;var o;if(e){o=new LA(1<<A);var a=15-A;for(t=0;t<n;++t)if(r[t])for(var I=t<<4|r[t],c=A-r[t],B=i[r[t]-1]++<<c,E=B|(1<<c)-1;B<=E;++B)o[ne[B]>>a]=I}else for(o=new LA(n),t=0;t<n;++t)r[t]&&(o[t]=ne[i[r[t]-1]++]>>15-r[t]);return o},UA=new sA(288),H=0;H<144;++H)UA[H]=8;for(var H=144;H<256;++H)UA[H]=9;for(var H=256;H<280;++H)UA[H]=7;for(var H=280;H<288;++H)UA[H]=8;for(var $e=new sA(32),H=0;H<32;++H)$e[H]=5;var un=_A(UA,9,1),ln=_A($e,5,1),se=function(r){for(var A=r[0],e=1;e<r.length;++e)r[e]>A&&(A=r[e]);return A},aA=function(r,A,e){var n=A/8|0;return(r[n]|r[n+1]<<8)>>(A&7)&e},ie=function(r,A){var e=A/8|0;return(r[e]|r[e+1]<<8|r[e+2]<<16)>>(A&7)},fn=function(r){return(r+7)/8|0},re=function(r,A,e){return(A==null||A<0)&&(A=0),(e==null||e>r.length)&&(e=r.length),new sA(r.subarray(A,e))},dn=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],oA=function(r,A,e){var n=new Error(A||dn[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,oA),!e)throw n;return n},hn=function(r,A,e,n){var t=r.length,s=n?n.length:0;if(!t||A.f&&!A.l)return e||new sA(0);var i=!e,o=i||A.i!=2,a=A.i;i&&(e=new sA(t*3));var I=function(iA){var bA=e.length;if(iA>bA){var SA=new sA(Math.max(bA*2,iA));SA.set(e),e=SA}},c=A.f||0,B=A.p||0,E=A.b||0,u=A.l,f=A.d,h=A.m,d=A.n,w=t*8;do{if(!u){c=aA(r,B,1);var R=aA(r,B+1,3);if(B+=3,R)if(R==1)u=un,f=ln,h=9,d=5;else if(R==2){var b=aA(r,B,31)+257,J=aA(r,B+10,15)+4,$=b+aA(r,B+5,31)+1;B+=14;for(var P=new sA($),AA=new sA(19),Y=0;Y<J;++Y)AA[cn[Y]]=aA(r,B+Y*3,7);B+=J*3;for(var lA=se(AA),IA=(1<<lA)-1,wA=_A(AA,lA,1),Y=0;Y<$;){var tA=wA[aA(r,B,IA)];B+=tA&15;var F=tA>>4;if(F<16)P[Y++]=F;else{var eA=0,v=0;for(F==16?(v=3+aA(r,B,3),B+=2,eA=P[Y-1]):F==17?(v=3+aA(r,B,7),B+=3):F==18&&(v=11+aA(r,B,127),B+=7);v--;)P[Y++]=eA}}var V=P.subarray(0,b),X=P.subarray(b);h=se(V),d=se(X),u=_A(V,h,1),f=_A(X,d,1)}else oA(1);else{var F=fn(B)+4,L=r[F-4]|r[F-3]<<8,N=F+L;if(N>t){a&&oA(0);break}o&&I(E+L),e.set(r.subarray(F,N),E),A.b=E+=L,A.p=B=N*8,A.f=c;continue}if(B>w){a&&oA(0);break}}o&&I(E+131072);for(var nA=(1<<h)-1,BA=(1<<d)-1,fA=B;;fA=B){var eA=u[ie(r,B)&nA],T=eA>>4;if(B+=eA&15,B>w){a&&oA(0);break}if(eA||oA(2),T<256)e[E++]=T;else if(T==256){fA=B,u=null;break}else{var dA=T-254;if(T>264){var Y=T-257,RA=Xe[Y];dA=aA(r,B,(1<<RA)-1)+Ze[Y],B+=RA}var q=f[ie(r,B)&BA],xA=q>>4;q||oA(3),B+=q&15;var X=Qn[xA];if(xA>3){var RA=je[xA];X+=ie(r,B)&(1<<RA)-1,B+=RA}if(B>w){a&&oA(0);break}o&&I(E+131072);var OA=E+dA;if(E<X){var NA=s-X,Be=Math.min(X,OA);for(NA+E<0&&oA(3);E<Be;++E)e[E]=n[NA+E]}for(;E<OA;++E)e[E]=e[E-X]}}A.l=u,A.p=fA,A.b=E,A.f=c,u&&(c=1,A.m=h,A.d=f,A.n=d)}while(!c);return E!=e.length&&i?re(e,0,E):e.subarray(0,E)},pn=new sA(0),EA=function(r,A){return r[A]|r[A+1]<<8},gA=function(r,A){return(r[A]|r[A+1]<<8|r[A+2]<<16|r[A+3]<<24)>>>0},oe=function(r,A){return gA(r,A)+gA(r,A+4)*4294967296};function wn(r,A){return hn(r,{i:2},A.out,A.dictionary)}var ae=typeof TextDecoder<"u"&&new TextDecoder,yn=0;try{ae.decode(pn,{stream:!0}),yn=1}catch{}var mn=function(r){for(var A="",e=0;;){var n=r[e++],t=(n>127)+(n>223)+(n>239);if(e+t>r.length)return{s:A,r:re(r,e-1)};t?t==3?(n=((n&15)<<18|(r[e++]&63)<<12|(r[e++]&63)<<6|r[e++]&63)-65536,A+=String.fromCharCode(55296|n>>10,56320|n&1023)):t&1?A+=String.fromCharCode((n&31)<<6|r[e++]&63):A+=String.fromCharCode((n&15)<<12|(r[e++]&63)<<6|r[e++]&63):A+=String.fromCharCode(n)}};function Dn(r,A){if(A){for(var e="",n=0;n<r.length;n+=16384)e+=String.fromCharCode.apply(null,r.subarray(n,n+16384));return e}else{if(ae)return ae.decode(r);var t=mn(r),s=t.s,e=t.r;return e.length&&oA(8),s}}var Rn=function(r,A){return A+30+EA(r,A+26)+EA(r,A+28)},Sn=function(r,A,e){var n=EA(r,A+28),t=Dn(r.subarray(A+46,A+46+n),!(EA(r,A+8)&2048)),s=A+46+n,i=gA(r,A+20),o=e&&i==4294967295?Fn(r,s):[i,gA(r,A+24),gA(r,A+42)],a=o[0],I=o[1],c=o[2];return[EA(r,A+10),a,I,t,s+EA(r,A+30)+EA(r,A+32),c]},Fn=function(r,A){for(;EA(r,A)!=1;A+=4+EA(r,A+2));return[oe(r,A+12),oe(r,A+4),oe(r,A+20)]};function Tn(r,A){for(var e={},n=r.length-22;gA(r,n)!=101010256;--n)(!n||r.length-n>65558)&&oA(13);var t=EA(r,n+8);if(!t)return{};var s=gA(r,n+16),i=s==4294967295||t==65535;if(i){var o=gA(r,n-12);i=gA(r,o)==101075792,i&&(t=gA(r,o+32),s=gA(r,o+48))}for(var a=0;a<t;++a){var I=Sn(r,s,i),c=I[0],B=I[1],E=I[2],u=I[3],f=I[4],h=I[5],d=Rn(r,h);s=f,c?c==8?e[u]=wn(r.subarray(d,d+B),{out:new sA(E)}):oA(14,"unknown compression type "+c):e[u]=re(r,d,d+B)}return e}class ge{constructor(A){z(this,"_files",{});this.archiveUrl=A}get files(){return this._files}async extract(A=5,e=1e3){let n=0,t=!1,s;for(;n<A&&!t;)try{if(s=await fetch(this.archiveUrl),!s.ok)throw new Error(`Не удалось загрузить архив: ${s.statusText}`);t=!0}catch(o){if(n++,console.warn(`Попытка ${n} не удалась: ${o.message}`),n<A)await new Promise(a=>setTimeout(a,e));else throw new Error(`Не удалось загрузить архив после ${A} попыток`)}const i=new Uint8Array(await s.arrayBuffer());this._files=Tn(i)}getFileContent(A){const e=this._files[A];if(!e)throw new Error(`File ${A} not found in archive.`);return e}}const At=new Map,Ie=new Map;var Gn=Object.defineProperty,Ln=Object.getOwnPropertyDescriptor,Mn=(r,A,e,n)=>{for(var t=n>1?void 0:n?Ln(A,e):A,s=r.length-1,i;s>=0;s--)(i=r[s])&&(t=(n?i(A,e,t):i(t))||t);return n&&t&&Gn(A,e,t),t};_.ResourceLoader=class{init(A){GA.initKTX2Loader(A)}async load(A,e){const n=GA.getInstance();await this.loadModelResources(n,A),await this.loadTextureResources(n,e)}async loadModelResources(A,e){const n=new ge(e);try{await n.extract();for(const t in n.files){const s=n.getFileContent(t),i=new Blob([s]),o=URL.createObjectURL(i),a=await A.parseGLTFModel(s.buffer,o);At.set(t.split(".")[0],a)}}catch(t){console.error(t.message)}}async loadTextureResources(A,e){const n=new ge(e);try{await n.extract();for(const t in n.files){const s=n.getFileContent(t);if(t.includes(".ktx2")){const o=await new Promise((a,I)=>{GA._ktx2Loader.parse(s.buffer,a,I)});Ie.set(t.split(".")[0],o)}else{const o=new Blob([s],{type:"application/octet-stream"}),a=URL.createObjectURL(o),I=await A.loadTexture(a);Ie.set(t.split(".")[0],I),URL.revokeObjectURL(a)}}}catch(t){console.error(t.message)}}},_.ResourceLoader=Mn([Et()],_.ResourceLoader);function kn(r,A){return new Ct(async e=>{const n=A.baseOpt;e(yA.BaseOpt).toConstantValue(n);const t=A.commonDebugOpt;e(yA.CommonDebugOpt).toConstantValue(t);const s={value:0};e(yA.PassedTime).toConstantValue(s);const i=new g.WebGLRenderer({canvas:r,antialias:n.antialias,powerPreference:"high-performance"});i.setSize(window.innerWidth,window.innerHeight),i.outputColorSpace=n.colorSpace,i.setPixelRatio(Math.min(window.devicePixelRatio,2));const o=new g.PerspectiveCamera(n.camera.fov,window.innerWidth/window.innerHeight,n.camera.near,n.camera.far);o.position.copy(n.camera.position);const a={renderer:i,scene:new g.Scene,camera:o};e(yA.ThreeJsBase).toConstantValue(a);const I=new _.ResourceLoader;I.init(i),e(yA.ResourceLoader).toConstantValue(I);const c=new FA({title:"Debug",width:300});e(yA.GUI).toConstantValue(c),c.addFolder("Performance")})}async function _n(r){try{const A=await fetch(r);if(!A.ok)throw new Error(`Response status: ${A.status}`);return await A.json()}catch(A){console.error(A.message)}}const DA=class DA{static async task(A){return new Promise(e=>{DA.resolvers.set(this._idCounter++,{ms:A/1e3,resolver:e})})}static update(A){DA.resolvers.forEach((e,n)=>{e.ms-=A,e.ms<=0&&(e.resolver(),DA.resolvers.delete(n))})}};z(DA,"_idCounter",0),z(DA,"resolvers",new Map);let HA=DA;function et(r,A){const e=r.folders.find(n=>n._title===A);if(!e)throw new Error(`Folder with name ${A} not found`);return e}function Un(r,A,e,n="XYZ"){const t=r.toArray(),s=A.toArray(),i=t.map((o,a)=>o+(s[a]-o)*e);return new g.Euler(i[0],i[1],i[2],n)}async function xn(r){return new Promise(A=>{setTimeout(()=>{A()},r)})}function Nn(r,A){const e=r.frames.find(a=>a.filename.toLowerCase()===A.toLowerCase());if(!e)throw new Error(`Frame with id ${A} not found in atlas config`);const{x:n,y:t,h:s}=e.frame,{size:i}=r.meta,o=t/i.h;return new g.Vector2(n/i.w,o)}function bn(r){return r.x*r.x+r.y*r.y+r.z*r.z}function vn(r,A,e,n,t){return(r-A)/(e-A)*(t-n)+n}class Hn{constructor(A,e,n,t,s){z(this,"deltaTime",0);z(this,"clock",new g.Clock);z(this,"performanceFolderController");this.threeJSBase=A,this.commonDebugOpt=e,this.updatables=n,this.allPassedTime=t,this.gui=s,qA.ticker.remove(qA.updateRoot),this.performanceFolderController=this.addDebugGUI()}get getDeltaTime(){return this.deltaTime}handleUpdate(){this.deltaTime=this.clock.getDelta()*this.commonDebugOpt.timeScale,this.allPassedTime.value+=this.deltaTime,HA.update(this.deltaTime),qA.updateRoot(this.allPassedTime.value),this.updatables.forEach(A=>{A.update(this.deltaTime,this.threeJSBase.camera)})}addDebugGUI(){return et(this.gui,"Performance").add(this.commonDebugOpt,"timeScale",.1,2).name("Time Scale")}}class On{constructor(...A){z(this,"args");this.args=A}}function qn(r,A){const e=n=>{A(...n.detail)};return document.addEventListener(r.name,e,{passive:!0}),{unsubscribe:()=>document.removeEventListener(r.name,e)}}function Pn(r){const A=new CustomEvent(r.constructor.name,{detail:r.args});document.dispatchEvent(A)}_.ArchiveExtractor=ge,_.BASETYPES=yA,_.BaseUpdateHandler=Hn,_.EventBase=On,_.ModelsResources=At,_.TaskManager=HA,_.TexturesResources=Ie,_.ThreeJSLoaderWrapper=GA,_.buildBaseDIModule=kn,_.findGUIFolder=et,_.getConfigJSON=_n,_.getLengthVector=bn,_.getSpriteOffset=Nn,_.lerpingRotation=Un,_.mapRange=vn,_.publish=Pn,_.sleep=xn,_.subscribe=qn,Object.defineProperty(_,Symbol.toStringTag,{value:"Module"})});
